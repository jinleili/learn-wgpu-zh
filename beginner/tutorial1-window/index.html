<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>ä¾èµ–ä¸çª—å£ | å­¦ä¹  wgpu</title><meta name="description" content="ä½¿ç”¨ Rust å­¦ä¹  wgpu">
    <link rel="preload" href="/learn-wgpu-zh/assets/js/runtime~app.0356ea3b.js" as="script"><link rel="preload" href="/learn-wgpu-zh/assets/css/styles.5f9c7333.css" as="style"><link rel="preload" href="/learn-wgpu-zh/assets/js/3866.935da514.js" as="script"><link rel="preload" href="/learn-wgpu-zh/assets/js/app.36a17f61.js" as="script"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-2d69bb60.453cef33.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-bfc81dd6.f933fd23.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-4249d10f.34289098.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-82a25e06.b095900f.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-2168b6f4.738d08bb.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-1d87647f.779c6a7f.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-5ffceace.0175ef9b.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b2c95ce4.7db93f97.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-5d0cc617.77f9b952.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-e038f3ae.cbe86a6d.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-627538dd.dde93017.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-220b0cd1.eb6d9520.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-64802336.76702123.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-31840cac.8c35ef42.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b117cf7e.ea37f806.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/1162.0ed34385.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/3475.f631e7fe.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5883.018de961.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/7937.0ee3c714.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-5c7d04cb.70606f67.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/1426.a4ee7d87.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/2307.514ba132.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/381.6d1e98a7.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/662.e668e92c.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/2277.e66e9cd9.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4970.038f800e.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b3ccb192.a5f88daf.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5137.99cf5a36.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-0440027a.0e609293.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-2b11540d.951d599a.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-1f0489a3.03e6bc66.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-7db95cc0.7f4bf2ce.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-25d83dbe.6fd67858.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/6321.8fc13739.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5421.74f9675b.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4839.351bb8e7.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/416.e136c114.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/2922.200ad9e1.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4607.44b1e383.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/1769.5edd8deb.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/7854.f29d5804.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/7255.a3f7aa3d.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5734.949280ef.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/6402.d5149795.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/9292.245d373e.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-0c308a02.48171179.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-4a3d9733.dddd72dc.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b2a9f5e8.17fd2dd7.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4204.22ad1083.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-6b60e296.e990a137.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b2a9f626.eb84ac71.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-8daa1a0e.5b25ab54.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-8b4c6ddc.a8eae01a.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-745c8789.7cb8d6f5.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/9944.4fb0ec41.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-afc761bc.ba6b26b5.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/2076.13cb7f6a.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-3706649a.4a4323c6.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/75.adca943a.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/css/8096.styles.18e5be1d.css"><link rel="prefetch" href="/learn-wgpu-zh/assets/css/6681.styles.dd5c9e9d.css">
    <link rel="stylesheet" href="/learn-wgpu-zh/assets/css/styles.5f9c7333.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/learn-wgpu-zh/" class=""><img class="logo" src="/learn-wgpu-zh/res/wgpu-logo.png" alt="å­¦ä¹  wgpu"><span class="site-name can-hide">å­¦ä¹  wgpu</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/" class="router-link-active router-link-exact-active router-link-active" aria-label="ç®€ä½“ä¸­æ–‡"><!--[--><!--]--> ç®€ä½“ä¸­æ–‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://sotrh.github.io/learn-wgpu/" rel="noopener noreferrer" target="_blank" aria-label="English"><!--[--><!--]--> English <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/jinleili/learn-wgpu-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/" class="router-link-active router-link-exact-active router-link-active" aria-label="ç®€ä½“ä¸­æ–‡"><!--[--><!--]--> ç®€ä½“ä¸­æ–‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://sotrh.github.io/learn-wgpu/" rel="noopener noreferrer" target="_blank" aria-label="English"><!--[--><!--]--> English <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/jinleili/learn-wgpu-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/learn-wgpu-zh/" class="sidebar-item sidebar-heading" aria-label="ä»‹ç»"><!--[--><!--]--> ä»‹ç» <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">åŸºç¡€ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ä¾èµ–ä¸çª—å£"><!--[--><!--]--> ä¾èµ–ä¸çª—å£ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…" class="router-link-active router-link-exact-active sidebar-item" aria-label="æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…?"><!--[--><!--]--> æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…? <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#ä½¿ç”¨-rust-çš„æ–°ç‰ˆè§£æå™¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä½¿ç”¨ Rust çš„æ–°ç‰ˆè§£æå™¨"><!--[--><!--]--> ä½¿ç”¨ Rust çš„æ–°ç‰ˆè§£æå™¨ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#å…³äº-env-logger" class="router-link-active router-link-exact-active sidebar-item" aria-label="å…³äº env_logger"><!--[--><!--]--> å…³äº env_logger <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®" class="router-link-active router-link-exact-active sidebar-item" aria-label="åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®"><!--[--><!--]--> åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›® <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#ç¤ºä¾‹ä»£ç " class="router-link-active router-link-exact-active sidebar-item" aria-label="ç¤ºä¾‹ä»£ç "><!--[--><!--]--> ç¤ºä¾‹ä»£ç  <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#æ·»åŠ å¯¹-web-çš„æ”¯æŒ" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ·»åŠ å¯¹ web çš„æ”¯æŒ"><!--[--><!--]--> æ·»åŠ å¯¹ web çš„æ”¯æŒ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#web-assembly" class="router-link-active router-link-exact-active sidebar-item" aria-label="Web Assembly"><!--[--><!--]--> Web Assembly <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#æ›´å¤šç¤ºä¾‹ä»£ç " class="router-link-active router-link-exact-active sidebar-item" aria-label="æ›´å¤šç¤ºä¾‹ä»£ç "><!--[--><!--]--> æ›´å¤šç¤ºä¾‹ä»£ç  <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial1-window/#wasm-pack" class="router-link-active router-link-exact-active sidebar-item" aria-label="Wasm Pack"><!--[--><!--]--> Wasm Pack <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/learn-wgpu-zh/beginner/tutorial2-surface/" class="sidebar-item" aria-label="å±•ç¤ºå¹³é¢ (Surface)"><!--[--><!--]--> å±•ç¤ºå¹³é¢ (Surface) <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial3-pipeline/" class="sidebar-item" aria-label="ç®¡çº¿ (Pipeline)"><!--[--><!--]--> ç®¡çº¿ (Pipeline) <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial4-buffer/" class="sidebar-item" aria-label="ç¼“å†²åŒºä¸ç´¢å¼•"><!--[--><!--]--> ç¼“å†²åŒºä¸ç´¢å¼• <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial5-textures/" class="sidebar-item" aria-label="çº¹ç†å’Œç»‘å®šç»„"><!--[--><!--]--> çº¹ç†å’Œç»‘å®šç»„ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial6-uniforms/" class="sidebar-item" aria-label="Uniform ç¼“å†²åŒºä¸ 3D è™šæ‹Ÿæ‘„åƒæœº"><!--[--><!--]--> Uniform ç¼“å†²åŒºä¸ 3D è™šæ‹Ÿæ‘„åƒæœº <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial7-instancing/" class="sidebar-item" aria-label="å®ä¾‹åŒ–ç»˜åˆ¶"><!--[--><!--]--> å®ä¾‹åŒ–ç»˜åˆ¶ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial8-depth/" class="sidebar-item" aria-label="æ·±åº¦ç¼“å†²åŒº"><!--[--><!--]--> æ·±åº¦ç¼“å†²åŒº <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial9-models/" class="sidebar-item" aria-label="æ¨¡å‹åŠ è½½"><!--[--><!--]--> æ¨¡å‹åŠ è½½ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">è¿›é˜¶ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/learn-wgpu-zh/intermediate/tutorial10-lighting/" class="sidebar-item" aria-label="å…‰ç…§"><!--[--><!--]--> å…‰ç…§ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/intermediate/tutorial11-normals/" class="sidebar-item" aria-label="æ³•çº¿æ˜ å°„"><!--[--><!--]--> æ³•çº¿æ˜ å°„ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/intermediate/tutorial12-camera/" class="sidebar-item" aria-label="æ›´å¥½çš„æ‘„åƒæœº"><!--[--><!--]--> æ›´å¥½çš„æ‘„åƒæœº <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">é›†æˆä¸è°ƒè¯• <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/learn-wgpu-zh/integration-and-debugging/" class="sidebar-item" aria-label="æ¥”å­"><!--[--><!--]--> æ¥”å­ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/ios/" class="sidebar-item" aria-label="ğŸ†• ä¸ iOS App é›†æˆ"><!--[--><!--]--> ğŸ†• ä¸ iOS App é›†æˆ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/android/" class="sidebar-item" aria-label="ğŸ†• ä¸ Android App é›†æˆ"><!--[--><!--]--> ğŸ†• ä¸ Android App é›†æˆ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/xcode/" class="sidebar-item" aria-label="ğŸ†• ä½¿ç”¨ Xcode è°ƒè¯• wgpu ç¨‹åº"><!--[--><!--]--> ğŸ†• ä½¿ç”¨ Xcode è°ƒè¯• wgpu ç¨‹åº <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/snapdragon-profiler/" class="sidebar-item" aria-label="ğŸ†• ä½¿ç”¨ Snapdragon Profiler è°ƒè¯•"><!--[--><!--]--> ğŸ†• ä½¿ç”¨ Snapdragon Profiler è°ƒè¯• <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">æ¡ˆä¾‹å±•ç¤º <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/learn-wgpu-zh/showcase/windowless/" class="sidebar-item" aria-label="ç¦»å±æ¸²æŸ“"><!--[--><!--]--> ç¦»å±æ¸²æŸ“ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/gifs/" class="sidebar-item" aria-label="ç”Ÿæˆ GIF åŠ¨å›¾"><!--[--><!--]--> ç”Ÿæˆ GIF åŠ¨å›¾ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/pong/" class="sidebar-item" aria-label="Pong"><!--[--><!--]--> Pong <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/compute/" class="sidebar-item" aria-label="Compute Example: Tangents and Bitangents"><!--[--><!--]--> Compute Example: Tangents and Bitangents <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/alignment/" class="sidebar-item" aria-label="Memory Layout in WGSL"><!--[--><!--]--> Memory Layout in WGSL <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/imgui-demo/" class="sidebar-item" aria-label="Basic Imgui Demo"><!--[--><!--]--> Basic Imgui Demo <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/learn-wgpu-zh/GLOSSARY_OF_TERMS.html" class="sidebar-item sidebar-heading" aria-label="æœ¯è¯­ä¸­è‹±å¯¹ç…§è¡¨"><!--[--><!--]--> æœ¯è¯­ä¸­è‹±å¯¹ç…§è¡¨ <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ä¾èµ–ä¸çª—å£" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–ä¸çª—å£" aria-hidden="true">#</a> ä¾èµ–ä¸çª—å£</h1><p>éƒ¨åˆ†è¯»è€…å¯èƒ½å·²ç»ç†Ÿæ‚‰å¦‚ä½•åœ¨ Rust ä¸­æ‰“å¼€çª—å£ç¨‹åºï¼Œä¸”æœ‰è‡ªå·±åå¥½çš„çª—å£ç®¡ç†åº“ã€‚ä½†æœ¬æ•™ç¨‹æ˜¯ä¸ºæ‰€æœ‰äººè®¾è®¡çš„ï¼Œæ‰€ä»¥ä¸å…è¦æ¶‰åŠè¿™éƒ¨åˆ†çš„å†…å®¹ã€‚æ‰€å¹¸ä½ å¯ä»¥è·³è¿‡è¿™éƒ¨åˆ†ï¼Œä½†æœ‰ä¸€ç‚¹å€¼å¾—äº†è§£ï¼Œå³æ— è®ºä½¿ç”¨ä»€ä¹ˆæ ·çš„çª—å£è§£å†³æ–¹æ¡ˆï¼Œéƒ½éœ€è¦å®ç° <a href="https://github.com/rust-windowing/raw-window-handle" target="_blank" rel="noopener noreferrer">raw-window-handle<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é‡Œå®šä¹‰çš„ <code>raw_window_handle()</code> åŠ <code>raw_display_handle()</code> ä¸¤ä¸ªæŠ½è±¡æ¥å£ã€‚å¦‚æœæœ‰å…´è¶£è‡ªå·±åŠ¨æ‰‹æ¥ä¸º wgpu å®ç°ä¸€ä¸ªåŸºç¡€çš„çª—å£ï¼Œå¯ä»¥å‚è€ƒ <a href="https://github.com/jinleili/wgpu-on-app" target="_blank" rel="noopener noreferrer">wgpu-on-app<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œ<a href="/learn-wgpu-zh/integration-and-debugging/android/" class="">ä¸ Android App é›†æˆ</a>è¿™ä¸€ç« èŠ‚ä¹Ÿæœ‰è¯¦æƒ…çš„ä»‹ç»ã€‚</p><h2 id="æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…" tabindex="-1"><a class="header-anchor" href="#æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…" aria-hidden="true">#</a> æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…?</h2><p>æˆ‘ä»¬å°†å°½é‡ä¿æŒåŸºç¡€éƒ¨åˆ†çš„ç®€å•æ€§ã€‚åç»­æˆ‘ä»¬ä¼šé€æ¸æ·»åŠ ä¾èµ–ï¼Œå…ˆåˆ—å‡ºç›¸å…³çš„ <code>Cargo.toml</code> ä¾èµ–é¡¹å¦‚ä¸‹ï¼š</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">winit</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.26&quot;</span>
<span class="token key property">env_logger</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.9&quot;</span>
<span class="token key property">log</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4&quot;</span>
<span class="token key property">wgpu</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.13&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä½¿ç”¨-rust-çš„æ–°ç‰ˆè§£æå™¨" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-rust-çš„æ–°ç‰ˆè§£æå™¨" aria-hidden="true">#</a> ä½¿ç”¨ Rust çš„æ–°ç‰ˆè§£æå™¨</h2><p>è‡ª 0.10 ç‰ˆæœ¬èµ·ï¼Œwgpu éœ€è¦ä½¿ç”¨ cargo çš„ <a href="https://doc.rust-lang.org/cargo/reference/resolver.html#feature-resolver-version-2" target="_blank" rel="noopener noreferrer">æ–°ç‰ˆç‰¹æ€§è§£æå™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œè¿™åœ¨ Rust çš„ 2021 editionï¼ˆå³ä»»ä½•åŸºäº Rust 1.56.0 æˆ–æ›´æ–°ç‰ˆæœ¬çš„æ–°é¡¹ç›®ï¼‰ä¸­æ˜¯é»˜è®¤å¯ç”¨çš„ã€‚ä½†å¦‚æœä½ ä»åœ¨ä½¿ç”¨ 2018 editionï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨å•<strong>åŒ…</strong>é¡¹ç›® <code>Cargo.toml</code> çš„ <code>[package]</code> é…ç½®ä¸­ï¼Œæˆ–è€…åœ¨<strong>â¼¯ä½œç©ºé—´</strong>çš„æ ¹çº§ <code>Cargo.toml</code> çš„ <code>[workspace]</code> é…ç½®ä¸­æ·»åŠ  <code>resolver = &quot;2&quot;</code> é¡¹ã€‚</p><h2 id="å…³äº-env-logger" tabindex="-1"><a class="header-anchor" href="#å…³äº-env-logger" aria-hidden="true">#</a> å…³äº env_logger</h2><p>é€šè¿‡ <code>env_logger::init()</code> æ¥å¯ç”¨æ—¥å¿—æ˜¯éå¸¸é‡è¦çš„ã€‚å½“ wgpu é‡åˆ°å„ç±»é”™è¯¯æ—¶ï¼Œå®ƒéƒ½ä¼šç”¨ä¸€æ¡é€šç”¨æ€§çš„æ¶ˆæ¯æŠ›å‡º panicï¼Œå¹¶é€šè¿‡æ—¥å¿—<strong>åŒ…</strong>æ¥è®°å½•å®é™…çš„é”™è¯¯ä¿¡æ¯ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸æ·»åŠ  <code>env_logger::init()</code>ï¼Œwgpu å°†é™é»˜åœ°é€€å‡ºï¼Œä»è€Œä»¤ä½ éå¸¸å›°æƒ‘ï¼<br> (ä¸‹é¢çš„ä»£ç ä¸­å·²ç»å¯ç”¨)</p><h2 id="åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®" aria-hidden="true">#</a> åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</h2><p>è¿è¡Œ <code>cargo new xxx</code>ï¼Œxxx æ˜¯æŒ‡ä½ çš„é¡¹ç›®åç§°ã€‚<br> (ä¸‹é¢çš„ä¾‹å­ä¸­æˆ‘ä½¿ç”¨äº† <code>tutorial1_window</code>)</p><h2 id="ç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç " aria-hidden="true">#</a> ç¤ºä¾‹ä»£ç </h2><p>è¿™ä¸€éƒ¨åˆ†æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œæ‰€ä»¥ç›´æ¥è´´å‡ºå®Œæ•´çš„ä»£ç ã€‚åªéœ€å°†å…¶ç²˜è´´åˆ°ä½ çš„ <code>lib.rs</code> æˆ–ç±»ä¼¼ä½ç½®å³å¯ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">winit<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
    <span class="token namespace">event<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">,</span>
    <span class="token namespace">event_loop<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">ControlFlow</span><span class="token punctuation">,</span> <span class="token class-name">EventLoop</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token namespace">window<span class="token punctuation">::</span></span><span class="token class-name">WindowBuilder</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token namespace">env_logger<span class="token punctuation">::</span></span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> event_loop <span class="token operator">=</span> <span class="token class-name">EventLoop</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> window <span class="token operator">=</span> <span class="token class-name">WindowBuilder</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>event_loop<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    event_loop<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">move</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>event<span class="token punctuation">,</span> _<span class="token punctuation">,</span> control_flow<span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">match</span> event <span class="token punctuation">{</span>
        <span class="token class-name">Event</span><span class="token punctuation">::</span><span class="token class-name">WindowEvent</span> <span class="token punctuation">{</span>
            <span class="token keyword">ref</span> event<span class="token punctuation">,</span>
            window_id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span> <span class="token keyword">if</span> window_id <span class="token operator">==</span> window<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">match</span> event <span class="token punctuation">{</span>
            <span class="token class-name">WindowEvent</span><span class="token punctuation">::</span><span class="token class-name">CloseRequested</span>
            <span class="token operator">|</span> <span class="token class-name">WindowEvent</span><span class="token punctuation">::</span><span class="token class-name">KeyboardInput</span> <span class="token punctuation">{</span>
                input<span class="token punctuation">:</span>
                    <span class="token class-name">KeyboardInput</span> <span class="token punctuation">{</span>
                        state<span class="token punctuation">:</span> <span class="token class-name">ElementState</span><span class="token punctuation">::</span><span class="token class-name">Pressed</span><span class="token punctuation">,</span>
                        virtual_keycode<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">VirtualKeyCode</span><span class="token punctuation">::</span><span class="token class-name">Escape</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token punctuation">..</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">..</span>
            <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token operator">*</span>control_flow <span class="token operator">=</span> <span class="token class-name">ControlFlow</span><span class="token punctuation">::</span><span class="token class-name">Exit</span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        _ <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç æ‰€åšçš„å…¨éƒ¨å·¥ä½œå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªçª—å£ï¼Œå¹¶åœ¨ç”¨æˆ·å…³é—­æˆ–æŒ‰ä¸‹ escape é”®å‰ä½¿å…¶ä¿æŒæ‰“å¼€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>main.rs</code> ä¸­è¿è¡Œè¿™äº›ä»£ç ã€‚å¾ˆç®€å•ï¼Œåªéœ€å¯¼å…¥ <code>run()</code>ï¼Œç„¶åè¿è¡Œ!</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">tutorial1_window<span class="token punctuation">::</span></span>run<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(å…¶ä¸­ <code>tutorial1_window</code> æ˜¯ä½ ä¹‹å‰ç”¨ cargo åˆ›å»ºçš„é¡¹ç›®çš„åç§°)</p><p>å½“ä½ åªæ‰“ç®—æ”¯æŒæ¡Œé¢ç¯å¢ƒæ—¶ï¼Œä¸Šè¾¹è¿™äº›å°±æ˜¯å…¨éƒ¨æ‰€è¦åšçš„ï¼åœ¨ä¸‹ä¸€ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†çœŸæ­£å¼€å§‹ä½¿ç”¨ wgpuï¼</p><h2 id="æ·»åŠ å¯¹-web-çš„æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ å¯¹-web-çš„æ”¯æŒ" aria-hidden="true">#</a> æ·»åŠ å¯¹ web çš„æ”¯æŒ</h2><p>å¦‚æœè®²å®Œäº†è¿™ä¸ªå…³äº WebGPU çš„æ•™ç¨‹ï¼Œå´ä¸æå¦‚ä½•åœ¨ web ä¸Šä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªæ•™ç¨‹å°±æ˜¯ä¸å®Œæ•´çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œè®©ä¸€ä¸ª wgpu ç¨‹åºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¹¶ä¸éš¾ã€‚</p><p>è®©æˆ‘ä»¬ä»ä¿®æ”¹ <code>Cargo.toml</code> å¼€å§‹ï¼š</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">lib</span><span class="token punctuation">]</span>
<span class="token key property">crate-type</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;cdylib&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rlib&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å‡ è¡Œå‘Šè¯‰ cargo å…è®¸æˆ‘ä»¬çš„é¡¹ç›®<strong>æ„å»º</strong>ï¼ˆbuild)ä¸€ä¸ªæœ¬åœ°çš„ Rust é™æ€åº“ï¼ˆrlibï¼‰å’Œä¸€ä¸ª C/C++ å…¼å®¹åº“ï¼ˆcdylibï¼‰ã€‚ æˆ‘ä»¬éœ€è¦ rlib æ¥åœ¨æ¡Œé¢ç¯å¢ƒä¸­è¿è¡Œ wgpuï¼Œéœ€è¦ cdylib æ¥æ„å»ºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ Web Assemblyã€‚</p><div class="note"><h2 id="web-assembly" tabindex="-1"><a class="header-anchor" href="#web-assembly" aria-hidden="true">#</a> Web Assembly</h2><p>Web Assembly å³ WASMï¼Œæ˜¯å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨æ”¯æŒçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ƒä»¤ Rust ç­‰åº•å±‚è¯­è¨€èƒ½åœ¨ç½‘é¡µä¸Šè¿è¡Œã€‚è¿™å…è®¸æˆ‘ä»¬ç”¨ Rust ç¼–å†™åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨å‡ è¡Œ Javascript æ¥åŠ è½½å®ƒåˆ° Web æµè§ˆå™¨ä¸­è¿è¡Œã€‚</p></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä»…éœ€æ·»åŠ ä¸€äº›ä¸“é—¨ç”¨äºåœ¨ WASM ä¸­è¿è¡Œçš„ä¾èµ–é¡¹ï¼š</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">cfg-if</span> <span class="token punctuation">=</span> <span class="token string">&quot;1&quot;</span>
<span class="token comment"># å…¶ä»–å¸¸è§„ä¾èµ–...</span>

<span class="token punctuation">[</span><span class="token table class-name">target.&#39;cfg(target_arch = &quot;wasm32&quot;)&#39;.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">console_error_panic_hook</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.1.6&quot;</span>
<span class="token key property">console_log</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.2.0&quot;</span>
<span class="token key property">wgpu</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.13&quot;</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;webgl&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token key property">wasm-bindgen</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.2&quot;</span>
<span class="token key property">wasm-bindgen-futures</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4.30&quot;</span>
<span class="token key property">web-sys</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.3&quot;</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;Document&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Window&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Element&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://docs.rs/cfg-if" target="_blank" rel="noopener noreferrer">cfg-if<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æä¾›äº†ä¸€ä¸ªå®ï¼Œä½¿å¾—æ›´åŠ å®¹æ˜“ç®¡ç†ç‰¹å®šå¹³å°çš„ä»£ç ã€‚</p><p><code>[target.&#39;cfg(target_arch = &quot;wasm32&quot;)&#39;.dependencies]</code> è¡Œå‘Šè¯‰ cargoï¼Œå¦‚æœæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ wasm32 æ¶æ„ï¼Œåˆ™åªåŒ…æ‹¬è¿™äº›ä¾èµ–é¡¹ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªä¾èµ–é¡¹åªæ˜¯è®©æˆ‘ä»¬ä¸ javascript çš„äº¤äº’æ›´å®¹æ˜“ã€‚</p><ul><li><a href="https://docs.rs/console_error_panic_hook" target="_blank" rel="noopener noreferrer">console_error_panic_hook<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½® <code>panic!</code> å®ä»¥å°†é”™è¯¯å‘é€åˆ° javascript æ§åˆ¶å°ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªï¼Œå½“é‡åˆ°ç¨‹åºå´©æºƒæ—¶ï¼Œä½ å°±ä¼šå¯¹å¯¼è‡´å´©æºƒçš„åŸå› ä¸€æ— æ‰€çŸ¥ã€‚</li><li><a href="https://docs.rs/console_log" target="_blank" rel="noopener noreferrer">console_log<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å®ç°äº† <a href="https://docs.rs/log" target="_blank" rel="noopener noreferrer">log<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> APIã€‚å®ƒå°†æ‰€æœ‰æ—¥å¿—å‘é€åˆ° javascript æ§åˆ¶å°ã€‚å®ƒè¿˜å¯ä»¥é…ç½®ä¸ºä»…å‘é€ç‰¹å®šçº§åˆ«çš„æ—¥å¿—ï¼Œè¿™éå¸¸é€‚åˆç”¨äºè°ƒè¯•ã€‚</li><li>å½“æˆ‘ä»¬æƒ³åœ¨å¤§å¤šæ•°å½“å‰æµè§ˆå™¨ä¸Šè¿è¡Œæ—¶ï¼Œå°±éœ€è¦åœ¨ wgpu ä¸Šå¯ç”¨ <code>WebGL</code> åŠŸèƒ½ã€‚å› ä¸ºç›®å‰åªåœ¨ Firefox Nightly å’Œ Chrome Canary ç­‰æµè§ˆå™¨çš„å®éªŒç‰ˆæœ¬ä¸Šæ‰æ”¯æŒç›´æ¥ä½¿ç”¨ WebGPU APIã€‚<br> æ¬¢è¿ä½ åœ¨è¿™äº›æµè§ˆå™¨ä¸Šæµ‹è¯•è¿™æ®µä»£ç ï¼ˆwgpu çš„å¼€å‘è€…ä¹Ÿä¼šå¾ˆæ„Ÿæ¿€ï¼‰ï¼Œä½†ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘æ‰“ç®—åšæŒä½¿ç”¨ WebGL åŠŸèƒ½ï¼Œç›´åˆ° WebGPU API è¾¾åˆ°ä¸€ä¸ªæ›´ç¨³å®šçš„çŠ¶æ€ã€‚<br> å¦‚æœä½ æƒ³äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="https://github.com/gfx-rs/wgpu/wiki/Running-on-the-Web-with-WebGPU-and-WebGL" target="_blank" rel="noopener noreferrer">wgpu æºç ä»“åº“<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸Šçš„ web ç¼–è¯‘æŒ‡å—</li><li><a href="https://docs.rs/wasm-bindgen" target="_blank" rel="noopener noreferrer">wasm-bindgen<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ˜¯æ­¤åˆ—è¡¨ä¸­æœ€é‡è¦çš„ä¾èµ–é¡¹ã€‚å®ƒè´Ÿè´£ç”Ÿæˆæ ·æ¿ä»£ç ï¼Œå¹¶å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„é¡¹ç›®ã€‚å®ƒè¿˜å…è®¸æˆ‘ä»¬åœ¨ Rust ä¸­å…¬å¼€å¯åœ¨ Javascript ä¸­ä½¿ç”¨çš„<strong>å‡½æ•°</strong>ï¼Œåä¹‹äº¦ç„¶ã€‚<br> æˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç» wasm-bindgenï¼Œæ‰€ä»¥å¦‚æœä½ éœ€è¦å…¥é—¨ï¼ˆæˆ–è€…æ˜¯å¤ä¹ ï¼‰ï¼Œè¯·æŸ¥çœ‹<a href="https://rustwasm.github.io/wasm-bindgen/" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.rs/web-sys" target="_blank" rel="noopener noreferrer">web-sys<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ˜¯ä¸€ä¸ªåŒ…å«äº†è®¸å¤šåœ¨ javascript ç¨‹åºä¸­å¯ç”¨çš„<strong>å‡½æ•°</strong>å’Œ<strong>ç»“æ„ä½“</strong>çš„å·¥å…·ç®±ï¼Œå¦‚ï¼š<code>get_element_by_id</code>ã€<code>append_child</code>ã€‚<code>features = [...]</code> æ•°ç»„é‡Œåˆ—å‡ºçš„æ˜¯æˆ‘ä»¬ç›®å‰æœ€ä½é™åº¦éœ€è¦çš„åŠŸèƒ½ã€‚</li></ul><h2 id="æ›´å¤šç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#æ›´å¤šç¤ºä¾‹ä»£ç " aria-hidden="true">#</a> æ›´å¤šç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆ, æˆ‘ä»¬éœ€è¦åœ¨ <code>lib.rs</code> å†…å¼•å…¥ <code>wasm-bindgen</code> :</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[cfg(target_arch=<span class="token string">&quot;wasm32&quot;</span>)]</span>
<span class="token keyword">use</span> <span class="token namespace">wasm_bindgen<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥ï¼Œéœ€è¦å‘Šè¯‰ wasm-bindgen åœ¨ WASM è¢«åŠ è½½åæ‰§è¡Œæˆ‘ä»¬çš„ <code>run()</code> å‡½æ•°ã€‚</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[cfg_attr(target_arch=<span class="token string">&quot;wasm32&quot;</span>, wasm_bindgen(start))]</span>
<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// çœç•¥çš„ä»£ç ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åéœ€è¦æ ¹æ®æ˜¯å¦åœ¨ WASM ç¯å¢ƒæ¥åˆ‡æ¢æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„æ—¥å¿—<strong>åŒ…</strong>ã€‚åœ¨ <code>run()</code> å‡½æ•°å†…æ·»åŠ ä»¥ä¸‹ä»£ç æ›¿æ¢ <code>env_logger::init()</code> è¡Œã€‚</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token namespace">cfg_if<span class="token punctuation">::</span></span><span class="token macro property">cfg_if!</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token attribute attr-name">#[cfg(target_arch = <span class="token string">&quot;wasm32&quot;</span>)]</span> <span class="token punctuation">{</span>
        <span class="token namespace">std<span class="token punctuation">::</span>panic<span class="token punctuation">::</span></span><span class="token function">set_hook</span><span class="token punctuation">(</span><span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token namespace">console_error_panic_hook<span class="token punctuation">::</span></span>hook<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token namespace">console_log<span class="token punctuation">::</span></span><span class="token function">init_with_level</span><span class="token punctuation">(</span><span class="token namespace">log<span class="token punctuation">::</span></span><span class="token class-name">Level</span><span class="token punctuation">::</span><span class="token class-name">Warn</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;æ— æ³•åˆå§‹åŒ–æ—¥å¿—åº“&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token namespace">env_logger<span class="token punctuation">::</span></span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¾¹çš„ä»£ç åˆ¤æ–­äº†<strong>æ„å»º</strong>ç›®æ ‡ï¼Œåœ¨ web æ„å»ºä¸­è®¾ç½® <code>console_log</code> å’Œ <code>console_error_panic_hook</code>ã€‚è¿™å¾ˆé‡è¦ï¼Œå› ä¸º <code>env_logger</code> ç›®å‰ä¸æ”¯æŒ Web Assemblyã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåœ¨åˆ›å»ºäº†äº‹ä»¶å¾ªç¯ä¸çª—å£ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨åº”ç”¨ç¨‹åºæ‰€åœ¨çš„ HTML ç½‘é¡µä¸­æ·»åŠ ä¸€ä¸ª<strong>ç”»å¸ƒ</strong>ï¼ˆcanvas)ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[cfg(target_arch = <span class="token string">&quot;wasm32&quot;</span>)]</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Winit ä¸å…è®¸ç”¨ CSS è°ƒæ•´å¤§å°ï¼Œæ‰€ä»¥åœ¨ web ç¯å¢ƒé‡Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨è®¾ç½®å¤§å°ã€‚</span>
    <span class="token keyword">use</span> <span class="token namespace">winit<span class="token punctuation">::</span>dpi<span class="token punctuation">::</span></span><span class="token class-name">PhysicalSize</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">set_inner_size</span><span class="token punctuation">(</span><span class="token class-name">PhysicalSize</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">450</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">use</span> <span class="token namespace">winit<span class="token punctuation">::</span>platform<span class="token punctuation">::</span>web<span class="token punctuation">::</span></span><span class="token class-name">WindowExtWebSys</span><span class="token punctuation">;</span>
    <span class="token namespace">web_sys<span class="token punctuation">::</span></span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">and_then</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>win<span class="token closure-punctuation punctuation">|</span></span> win<span class="token punctuation">.</span><span class="token function">document</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">and_then</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>doc<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> dst <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">get_element_by_id</span><span class="token punctuation">(</span><span class="token string">&quot;wasm-example&quot;</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> canvas <span class="token operator">=</span> <span class="token namespace">web_sys<span class="token punctuation">::</span></span><span class="token class-name">Element</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">canvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dst<span class="token punctuation">.</span><span class="token function">append_child</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>canvas<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
            <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;æ— æ³•å°†ç”»å¸ƒæ·»åŠ åˆ°ç½‘é¡µä¸Š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="note"><p><code>&quot;wasm-example&quot;</code> è¿™ä¸ª ID æ˜¯é’ˆå¯¹æˆ‘çš„é¡¹ç›®ï¼ˆä¹Ÿå°±æ˜¯æœ¬æ•™ç¨‹ï¼‰çš„ã€‚ä½ å¯ä»¥ä½ åœ¨ HTML ä¸­ä½¿ç”¨ä»»ä½• ID æ¥ä»£æ›¿ï¼Œæˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å°†ç”»å¸ƒæ·»åŠ åˆ° <code>&lt;body&gt;</code> ä¸­ï¼Œå°±åƒ wgpu æºç ä»“åº“ä¸­æ‰€åšçš„é‚£æ ·ï¼Œè¿™éƒ¨åˆ†æœ€ç»ˆç”±ä½ å†³å®šã€‚</p></div><p>ä¸Šè¾¹è¿™äº›å°±æ˜¯æˆ‘ä»¬ç°åœ¨éœ€è¦çš„æ‰€æœ‰ web ä¸“ç”¨ä»£ç ã€‚æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯<strong>æ„å»º</strong> Web Assembly æœ¬èº«ã€‚</p><h2 id="wasm-pack" tabindex="-1"><a class="header-anchor" href="#wasm-pack" aria-hidden="true">#</a> Wasm Pack</h2><p>ä½ å¯ä»¥åªç”¨ wasm-bindgen æ¥<strong>æ„å»º</strong>ä¸€ä¸ª wgpu åº”ç”¨ç¨‹åºï¼Œä½†æˆ‘åœ¨è¿™æ ·åšçš„æ—¶å€™é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£… wasm-bindgenï¼Œå¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªä¾èµ–é¡¹ã€‚ä½œä¸ºä¾èµ–å…³ç³»çš„ç‰ˆæœ¬<strong>éœ€è¦</strong>ä¸ä½ å®‰è£…çš„ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ï¼Œå¦åˆ™æ„å»ºå°†ä¼šå¤±è´¥ã€‚</p><p>ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œå¹¶ä½¿é˜…è¯»è¿™ç¯‡æ•™ç¨‹äººæ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œæˆ‘é€‰æ‹©åœ¨ç»„åˆä¸­åŠ å…¥ <a href="https://rustwasm.github.io/docs/wasm-pack/" target="_blank" rel="noopener noreferrer">wasm-pack<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚wasm-pack å¯ä»¥ä¸ºä½ å®‰è£…æ­£ç¡®çš„ wasm-bindgen ç‰ˆæœ¬ï¼Œè€Œä¸”å®ƒè¿˜æ”¯æŒä¸ºä¸åŒç±»å‹çš„ web ç›®æ ‡è¿›è¡Œ<strong>æ„å»º</strong>ï¼šæµè§ˆå™¨ã€NodeJS å’Œ webpack ç­‰æ‰“åŒ…å·¥å…·ã€‚</p><p>ä½¿ç”¨ wasm-pack å‰ï¼Œä½ éœ€è¦å…ˆ<a href="https://rustwasm.github.io/wasm-pack/installer/" target="_blank" rel="noopener noreferrer">å®‰è£…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><p>å®Œæˆå®‰è£…åï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥<strong>æ„å»º</strong>æˆ‘ä»¬çš„é¡¹ç›®äº†ã€‚å½“ä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„<strong>åŒ…</strong>ï¼ˆcrateï¼‰æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>wasm-pack build</code>ã€‚å¦‚æœæ˜¯<strong>å·¥ä½œåŒº</strong>ï¼ˆworkspaceï¼‰ï¼Œå°±å¿…é¡»æŒ‡å®šä½ è¦æ„å»ºçš„åŒ…ã€‚æƒ³è±¡ä¸€ä¸‹<strong>åŒ…</strong>æ˜¯ä¸€ä¸ªåä¸º <code>game</code> çš„ç›®å½•ï¼Œä½ å°±ä¼šä½¿ç”¨ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>wasm-pack build game
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸€æ—¦ wasm-pack å®Œæˆ<strong>æ„å»º</strong>ï¼Œåœ¨ä½ çš„<strong>åŒ…</strong>ç›®å½•ä¸‹å°±ä¼šæœ‰ä¸€ä¸ª <code>pkg</code> ç›®å½•ï¼Œè¿è¡Œ WASM ä»£ç æ‰€éœ€çš„æ‰€æœ‰ javascript ä»£ç éƒ½åœ¨è¿™é‡Œã€‚ç„¶ååœ¨ javascript ä¸­å¯¼å…¥ WASM æ¨¡å—ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> init <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./pkg/game.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;WASM Loaded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç½‘ç«™ä½¿ç”¨äº† <a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener noreferrer">Vuepress<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œæ‰€ä»¥æˆ‘æ˜¯åœ¨ Vue ç»„ä»¶ä¸­åŠ è½½ WASMã€‚ä½ å¦‚ä½•ä½¿ç”¨ WASM å°†å–å†³äºä½ æƒ³åšä»€ä¹ˆã€‚å¦‚æœæƒ³çœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆåšçš„ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://github.com/sotrh/learn-wgpu/blob/master/docs/.vuepress/components/WasmExample.vue" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><div class="note"><p>å¦‚æœæ‰“ç®—åœ¨ä¸€ä¸ªæ™®é€šçš„ HTML ç½‘ç«™ä¸­ä½¿ç”¨ä½ çš„ WASM æ¨¡å—ï¼Œåªéœ€å‘Šè¯‰ wasm-pack ä»¥ web ä¸ºæ„å»ºç›®æ ‡ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>wasm-pack build <span class="token parameter variable">--target</span> web
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åå°±å¯ä»¥åœ¨ä¸€ä¸ª ES6 æ¨¡å—ä¸­è¿è¡Œ WASM ä»£ç :</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Pong with WASM<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">import</span> init <span class="token keyword">from</span> <span class="token string">&quot;./pkg/pong.js&quot;</span><span class="token punctuation">;</span>
      <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;WASM Loaded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token selector">canvas</span> <span class="token punctuation">{</span>
          <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æŸ¥çœ‹ç¤ºä¾‹ä»£ç è¿è¡Œ!</p><div id="wasm-example"><!----><button>Try Tutorial1_window!</button></div><div class="auto-github-link"><a href="https://github.com/jinleili/learn-wgpu-zh/tree/master/code/beginner/tutorial1-window/" target="_blank" rel="noopener noreferrer"> &quot;æŸ¥çœ‹æºç ï¼&quot; </a><!----></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/learn-wgpu-zh/beginner/tutorial2-surface/" class="" aria-label="å±•ç¤ºå¹³é¢ (Surface)"><!--[--><!--]--> å±•ç¤ºå¹³é¢ (Surface) <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/learn-wgpu-zh/assets/js/runtime~app.0356ea3b.js" defer></script><script src="/learn-wgpu-zh/assets/js/3866.935da514.js" defer></script><script src="/learn-wgpu-zh/assets/js/app.36a17f61.js" defer></script>
  </body>
</html>
