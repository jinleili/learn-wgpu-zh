<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>çº¹ç†å’Œç»‘å®šç»„ | å­¦ä¹  wgpu</title><meta name="description" content="ä½¿ç”¨ Rust å­¦ä¹  wgpu">
    <link rel="preload" href="/learn-wgpu-zh/assets/js/runtime~app.68211571.js" as="script"><link rel="preload" href="/learn-wgpu-zh/assets/css/styles.dbd69ac3.css" as="style"><link rel="preload" href="/learn-wgpu-zh/assets/js/3866.84df6019.js" as="script"><link rel="preload" href="/learn-wgpu-zh/assets/js/app.986ad84b.js" as="script"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-2d69bb60.01f6519b.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-bfc81dd6.95a9dfbd.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-4249d10f.7dcdb81d.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-82a25e06.8174ff70.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-2168b6f4.bb124c4e.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-1d87647f.4d8f8406.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-5ffceace.5f123405.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b2c95ce4.ab7b7933.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-5d0cc617.50502ea6.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-e038f3ae.e87d7359.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-627538dd.4a39ca3d.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-220b0cd1.c4e8a966.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-64802336.b3745b53.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-31840cac.66ea432d.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b117cf7e.7cf0dfd3.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/1162.db95a831.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/3475.21ed4127.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5883.cd8f9407.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/7937.f0c32122.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-5c7d04cb.6493e625.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/1426.7b25ee3c.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/2307.cadc63bf.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/381.21626542.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/662.691b010c.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4970.909cbe64.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b3ccb192.e047f69c.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5137.6c4d534c.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-0440027a.9432d27c.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-2b11540d.6d62e115.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-1f0489a3.a5795ef6.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-7db95cc0.a4b9a6ce.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-25d83dbe.54fa7fab.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/6321.f032eddc.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5421.5bde36c6.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4839.69da3468.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/416.e4272632.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/2922.e4abd783.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4607.e65879e5.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/1769.0ba29b84.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/7854.c42805e3.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/5734.01d6795e.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/6402.a60c113c.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/9292.8f71cd6d.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-0c308a02.0d774e16.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-4a3d9733.c2d326d0.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b2a9f5e8.10d973aa.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/4204.1b067ff5.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-6b60e296.7de48405.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-b2a9f626.18bf82a1.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-8daa1a0e.5ebf67f1.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-8b4c6ddc.76e27e96.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-745c8789.d034add4.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/9944.29b15b17.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-afc761bc.ade274d0.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/2076.ea11f7bb.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/v-3706649a.71b76089.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/js/75.8e0a872d.js"><link rel="prefetch" href="/learn-wgpu-zh/assets/css/8096.styles.d38597ea.css"><link rel="prefetch" href="/learn-wgpu-zh/assets/css/6681.styles.98ee24e7.css">
    <link rel="stylesheet" href="/learn-wgpu-zh/assets/css/styles.dbd69ac3.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/learn-wgpu-zh/" class=""><img class="logo" src="/learn-wgpu-zh/res/wgpu-logo.png" alt="å­¦ä¹  wgpu"><span class="site-name can-hide">å­¦ä¹  wgpu</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/" class="router-link-active router-link-exact-active router-link-active" aria-label="ç®€ä½“ä¸­æ–‡"><!--[--><!--]--> ç®€ä½“ä¸­æ–‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://sotrh.github.io/learn-wgpu/" rel="noopener noreferrer" target="_blank" aria-label="English"><!--[--><!--]--> English <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/jinleili/learn-wgpu-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/" class="router-link-active router-link-exact-active router-link-active" aria-label="ç®€ä½“ä¸­æ–‡"><!--[--><!--]--> ç®€ä½“ä¸­æ–‡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://sotrh.github.io/learn-wgpu/" rel="noopener noreferrer" target="_blank" aria-label="English"><!--[--><!--]--> English <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/jinleili/learn-wgpu-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/learn-wgpu-zh/" class="sidebar-item sidebar-heading" aria-label="ä»‹ç»"><!--[--><!--]--> ä»‹ç» <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">åŸºç¡€ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/learn-wgpu-zh/beginner/tutorial1-window/" class="sidebar-item" aria-label="ä¾èµ–ä¸çª—å£"><!--[--><!--]--> ä¾èµ–ä¸çª—å£ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial2-surface/" class="sidebar-item" aria-label="å±•ç¤ºå¹³é¢ (Surface)"><!--[--><!--]--> å±•ç¤ºå¹³é¢ (Surface) <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial3-pipeline/" class="sidebar-item" aria-label="ç®¡çº¿ (Pipeline)"><!--[--><!--]--> ç®¡çº¿ (Pipeline) <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial4-buffer/" class="sidebar-item" aria-label="ç¼“å†²åŒºä¸ç´¢å¼•"><!--[--><!--]--> ç¼“å†²åŒºä¸ç´¢å¼• <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="çº¹ç†å’Œç»‘å®šç»„"><!--[--><!--]--> çº¹ç†å’Œç»‘å®šç»„ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#åŠ è½½å›¾åƒæ–‡ä»¶" class="router-link-active router-link-exact-active sidebar-item" aria-label="åŠ è½½å›¾åƒæ–‡ä»¶"><!--[--><!--]--> åŠ è½½å›¾åƒæ–‡ä»¶ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#å¡«å……æ•°æ®åˆ°çº¹ç†ä¸­" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¡«å……æ•°æ®åˆ°çº¹ç†ä¸­"><!--[--><!--]--> å¡«å……æ•°æ®åˆ°çº¹ç†ä¸­ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#çº¹ç†è§†å›¾ä¸é‡‡æ ·å™¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="çº¹ç†è§†å›¾ä¸é‡‡æ ·å™¨"><!--[--><!--]--> çº¹ç†è§†å›¾ä¸é‡‡æ ·å™¨ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#ç»‘å®šç»„" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç»‘å®šç»„"><!--[--><!--]--> ç»‘å®šç»„ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#ç®¡çº¿å¸ƒå±€" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç®¡çº¿å¸ƒå±€"><!--[--><!--]--> ç®¡çº¿å¸ƒå±€ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#ä¿®æ”¹-vertices-å¸¸é‡" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä¿®æ”¹ VERTICES å¸¸é‡"><!--[--><!--]--> ä¿®æ”¹ VERTICES å¸¸é‡ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#ä¿®æ”¹ç€è‰²å™¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä¿®æ”¹ç€è‰²å™¨"><!--[--><!--]--> ä¿®æ”¹ç€è‰²å™¨ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#æ¸²æŸ“ç»“æœ" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ¸²æŸ“ç»“æœ"><!--[--><!--]--> æ¸²æŸ“ç»“æœ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#ä»£ç æ•´ç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="ä»£ç æ•´ç†"><!--[--><!--]--> ä»£ç æ•´ç† <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/learn-wgpu-zh/beginner/tutorial5-textures/#æŒ‘æˆ˜" class="router-link-active router-link-exact-active sidebar-item" aria-label="æŒ‘æˆ˜"><!--[--><!--]--> æŒ‘æˆ˜ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/learn-wgpu-zh/beginner/tutorial6-uniforms/" class="sidebar-item" aria-label="Uniform ç¼“å†²åŒºä¸ 3D è™šæ‹Ÿæ‘„åƒæœº"><!--[--><!--]--> Uniform ç¼“å†²åŒºä¸ 3D è™šæ‹Ÿæ‘„åƒæœº <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial7-instancing/" class="sidebar-item" aria-label="å®ä¾‹åŒ–ç»˜åˆ¶"><!--[--><!--]--> å®ä¾‹åŒ–ç»˜åˆ¶ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial8-depth/" class="sidebar-item" aria-label="æ·±åº¦ç¼“å†²åŒº"><!--[--><!--]--> æ·±åº¦ç¼“å†²åŒº <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/beginner/tutorial9-models/" class="sidebar-item" aria-label="æ¨¡å‹åŠ è½½"><!--[--><!--]--> æ¨¡å‹åŠ è½½ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">è¿›é˜¶ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/learn-wgpu-zh/intermediate/tutorial10-lighting/" class="sidebar-item" aria-label="å…‰ç…§"><!--[--><!--]--> å…‰ç…§ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/intermediate/tutorial11-normals/" class="sidebar-item" aria-label="æ³•çº¿æ˜ å°„"><!--[--><!--]--> æ³•çº¿æ˜ å°„ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/intermediate/tutorial12-camera/" class="sidebar-item" aria-label="æ›´å¥½çš„æ‘„åƒæœº"><!--[--><!--]--> æ›´å¥½çš„æ‘„åƒæœº <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">é›†æˆä¸è°ƒè¯• <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/learn-wgpu-zh/integration-and-debugging/" class="sidebar-item" aria-label="æ¥”å­"><!--[--><!--]--> æ¥”å­ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/ios/" class="sidebar-item" aria-label="ğŸ†• ä¸ iOS App é›†æˆ"><!--[--><!--]--> ğŸ†• ä¸ iOS App é›†æˆ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/android/" class="sidebar-item" aria-label="ğŸ†• ä¸ Android App é›†æˆ"><!--[--><!--]--> ğŸ†• ä¸ Android App é›†æˆ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/xcode/" class="sidebar-item" aria-label="ğŸ†• ä½¿ç”¨ Xcode è°ƒè¯• wgpu ç¨‹åº"><!--[--><!--]--> ğŸ†• ä½¿ç”¨ Xcode è°ƒè¯• wgpu ç¨‹åº <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/integration-and-debugging/snapdragon-profiler/" class="sidebar-item" aria-label="ğŸ†• ä½¿ç”¨ Snapdragon Profiler è°ƒè¯•"><!--[--><!--]--> ğŸ†• ä½¿ç”¨ Snapdragon Profiler è°ƒè¯• <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">æ¡ˆä¾‹å±•ç¤º <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/learn-wgpu-zh/showcase/windowless/" class="sidebar-item" aria-label="ç¦»å±æ¸²æŸ“"><!--[--><!--]--> ç¦»å±æ¸²æŸ“ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/gifs/" class="sidebar-item" aria-label="ç”Ÿæˆ GIF åŠ¨å›¾"><!--[--><!--]--> ç”Ÿæˆ GIF åŠ¨å›¾ <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/pong/" class="sidebar-item" aria-label="Pong"><!--[--><!--]--> Pong <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/compute/" class="sidebar-item" aria-label="Compute Example: Tangents and Bitangents"><!--[--><!--]--> Compute Example: Tangents and Bitangents <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/alignment/" class="sidebar-item" aria-label="Memory Layout in WGSL"><!--[--><!--]--> Memory Layout in WGSL <!--[--><!--]--></a><!----></li><li><a href="/learn-wgpu-zh/showcase/imgui-demo/" class="sidebar-item" aria-label="Basic Imgui Demo"><!--[--><!--]--> Basic Imgui Demo <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/learn-wgpu-zh/GLOSSARY_OF_TERMS.html" class="sidebar-item sidebar-heading" aria-label="æœ¯è¯­ä¸­è‹±å¯¹ç…§è¡¨"><!--[--><!--]--> æœ¯è¯­ä¸­è‹±å¯¹ç…§è¡¨ <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="çº¹ç†å’Œç»‘å®šç»„" tabindex="-1"><a class="header-anchor" href="#çº¹ç†å’Œç»‘å®šç»„" aria-hidden="true">#</a> çº¹ç†å’Œç»‘å®šç»„</h1><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ç»˜åˆ¶ç®€å•çš„å›¾å½¢ã€‚å½“ç„¶å¯ä»¥åªç”¨ä¸‰è§’å½¢æ¥åšæ¸¸æˆï¼Œè€Œè¯•å›¾ç»˜åˆ¶é«˜ç²¾åº¦çš„<strong>å¯¹è±¡</strong>åˆä¼šæå¤§åœ°é™åˆ¶èƒ½è¿è¡Œæˆ‘ä»¬æ¸¸æˆçš„è®¾å¤‡ã€‚ä¸è¿‡ï¼Œå¯ä»¥ç”¨ <strong>çº¹ç†</strong> æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><p><strong>çº¹ç†</strong>ï¼ˆTexturesï¼‰æ˜¯å åŠ åœ¨ä¸‰è§’å½¢<strong>ç½‘æ ¼</strong>ï¼ˆMeshï¼‰ä¸Šçš„å›¾åƒï¼Œä½¿å…¶çœ‹èµ·æ¥æœ‰ä¸°å¯Œçš„ç»†èŠ‚ã€‚æœ‰å¤šç§ç±»å‹çš„çº¹ç†ï¼Œå¦‚æ³•çº¿è´´å›¾ï¼ˆNormal Mapsï¼Œä¹Ÿå°±æ˜¯æ³•çº¿çº¹ç†ï¼‰ã€å‡¹å‡¸è´´å›¾ï¼ˆBump Mapsï¼‰ã€é•œé¢è´´å›¾å’Œæ¼«åå°„è´´å›¾ã€‚ä¸‹è¾¹å°†è®¨è®ºæ¼«åå°„è´´å›¾ï¼Œç®€å•æ¥è¯´ä¹Ÿå°±æ˜¯é¢œè‰²çº¹ç†ã€‚</p><h2 id="åŠ è½½å›¾åƒæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åŠ è½½å›¾åƒæ–‡ä»¶" aria-hidden="true">#</a> åŠ è½½å›¾åƒæ–‡ä»¶</h2><p>è¦æŠŠä¸€ä¸ªå›¾åƒ<strong>æ˜ å°„</strong>åˆ°å¯¹è±¡<strong>ç½‘æ ¼</strong>ä¸Šï¼Œé¦–å…ˆæ˜¯éœ€è¦æœ‰ä¸€ä¸ªå›¾åƒæ–‡ä»¶ã€‚å°±ä½¿ç”¨ä¸‹è¾¹è¿™æ£µå¿«ä¹çš„å°æ ‘å§ï¼š</p><p><img src="/learn-wgpu-zh/assets/img/happy-tree.33b4526b.png" alt="ä¸€æ£µå¿«ä¹çš„æ ‘"></p><p>æˆ‘ä»¬å°†ä½¿ç”¨ <a href="https://docs.rs/image" target="_blank" rel="noopener noreferrer">image åŒ…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥åŠ è½½è¿™æ£µæ ‘ã€‚å…ˆæŠŠå®ƒæ·»åŠ åˆ°ä¾èµ–é¡¹ä¸­ï¼š</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies.image</span><span class="token punctuation">]</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.24&quot;</span>
<span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jpeg&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>image</code> åŒ…å«çš„ jpeg è§£ç å™¨ä½¿ç”¨ <a href="https://docs.rs/rayon" target="_blank" rel="noopener noreferrer">rayon<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥åŠ é€Ÿçº¿ç¨‹çš„è§£ç é€Ÿåº¦ã€‚WASM ç›®å‰ä¸æ”¯æŒçº¿ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¦ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œè¿™æ ·ä»£ç åœ¨å°è¯•åŠ è½½ç½‘ç»œä¸Šçš„ jpeg æ—¶å°±ä¸ä¼šå´©æºƒã€‚</p><div class="note"><p>åœ¨ WASM ä¸­è§£ç  jpeg æ€§èƒ½ä¸é«˜ã€‚å¦‚æœä½ æƒ³åœ¨ WASM ä¸­åŠ å¿«å›¾åƒåŠ è½½é€Ÿåº¦ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨æµè§ˆå™¨çš„å†…ç½®è§£ç å™¨æ¥æ›¿æ¢ <code>wasm-bindgen</code> æ„å»ºæ—¶ä½¿ç”¨ çš„ <code>image</code>ã€‚è¿™æ¶‰åŠåˆ°åœ¨ Rust ä¸­åˆ›å»ºä¸€ä¸ª <code>&lt;img&gt;</code> æ ‡è®°æ¥è·å–å›¾åƒï¼Œç„¶ååˆ›å»ºä¸€ä¸ª <code>&lt;canvas&gt;</code> æ¥è·å–åƒç´ æ•°æ®ï¼Œæˆ‘æŠŠè¿™ç•™ä½œè¯»è€…çš„ç»ƒä¹ ã€‚</p></div><p>åœ¨ <code>State</code> çš„ <code>new()</code> å‡½æ•°ä¸­ï¼Œäº <code>surface.configure()</code> ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code>surface<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>device<span class="token punctuation">,</span> <span class="token operator">&amp;</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ–°æ·»åŠ !</span>

<span class="token keyword">let</span> diffuse_bytes <span class="token operator">=</span> <span class="token macro property">include_bytes!</span><span class="token punctuation">(</span><span class="token string">&quot;happy-tree.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_image <span class="token operator">=</span> <span class="token namespace">image<span class="token punctuation">::</span></span><span class="token function">load_from_memory</span><span class="token punctuation">(</span>diffuse_bytes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_rgba <span class="token operator">=</span> diffuse_image<span class="token punctuation">.</span><span class="token function">to_rgba8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token namespace">image<span class="token punctuation">::</span></span><span class="token class-name">GenericImageView</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> dimensions <span class="token operator">=</span> diffuse_image<span class="token punctuation">.</span><span class="token function">dimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤å¤„ä»£ç ä»å›¾åƒæ–‡ä»¶ä¸­è¯»å–<strong>å­—èŠ‚</strong>ï¼Œå¹¶å°†å…¶åŠ è½½åˆ° image å¯¹è±¡ä¸­ï¼Œç„¶åè½¬æ¢ä¸º rgba <strong>åŠ¨æ€æ•°ç»„</strong>ã€‚æˆ‘ä»¬è¿˜ä¿å­˜äº†å›¾åƒçš„å°ºå¯¸ä¿¡æ¯ä»¥ä¾¿åœ¨åˆ›å»ºå®é™…çº¹ç†æ—¶ä½¿ç”¨ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºçº¹ç†ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> texture_size <span class="token operator">=</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Extent3d</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">:</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
    depth_or_array_layers<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_texture <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_texture</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureDescriptor</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰€æœ‰çº¹ç†éƒ½æ˜¯ä»¥ 3D å½¢å¼å­˜å‚¨çš„ï¼Œæˆ‘ä»¬é€šè¿‡è®¾ç½®æ·±åº¦ 1 æ¥è¡¨ç¤º 2D çº¹ç†</span>
        size<span class="token punctuation">:</span> texture_size<span class="token punctuation">,</span>
        mip_level_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// åé¢ä¼šè¯¦ç»†ä»‹ç»æ­¤å­—æ®µ</span>
        sample_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        dimension<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureDimension</span><span class="token punctuation">::</span><span class="token constant">D2</span><span class="token punctuation">,</span>
        <span class="token comment">// å¤§å¤šæ•°å›¾åƒéƒ½æ˜¯ä½¿ç”¨ sRGB æ¥å­˜å‚¨çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿™é‡ŒæŒ‡å®šã€‚</span>
        format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureFormat</span><span class="token punctuation">::</span><span class="token class-name">Rgba8UnormSrgb</span><span class="token punctuation">,</span>
        <span class="token comment">// TEXTURE_BINDING è¡¨ç¤ºæˆ‘ä»¬è¦åœ¨ç€è‰²å™¨ä¸­ä½¿ç”¨è¿™ä¸ªçº¹ç†ã€‚</span>
        <span class="token comment">// COPY_DST è¡¨ç¤ºæˆ‘ä»¬èƒ½å°†æ•°æ®å¤åˆ¶åˆ°è¿™ä¸ªçº¹ç†ä¸Šã€‚</span>
        usage<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureUsages</span><span class="token punctuation">::</span><span class="token constant">TEXTURE_BINDING</span> <span class="token operator">|</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureUsages</span><span class="token punctuation">::</span><span class="token constant">COPY_DST</span><span class="token punctuation">,</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;diffuse_texture&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¡«å……æ•°æ®åˆ°çº¹ç†ä¸­" tabindex="-1"><a class="header-anchor" href="#å¡«å……æ•°æ®åˆ°çº¹ç†ä¸­" aria-hidden="true">#</a> å¡«å……æ•°æ®åˆ°çº¹ç†ä¸­</h2><p><code>Texture</code> ç»“æ„ä½“æ²¡æœ‰å‡½æ•°å¯ä»¥ç›´æ¥ä¸æ•°æ®äº¤äº’ã€‚ä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„<strong>å‘½ä»¤é˜Ÿåˆ—</strong>ä¸Šçš„ <code>write_texture</code> å‘½ä»¤æ¥å¡«å……çº¹ç†æ•°æ®ã€‚ä¸‹è¾¹æ˜¯å…·ä½“ä»£ç ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code>queue<span class="token punctuation">.</span><span class="token function">write_texture</span><span class="token punctuation">(</span>
    <span class="token comment">// å‘Šè¯‰ wgpu ä»ä½•å¤„å¤åˆ¶åƒç´ æ•°æ®</span>
    <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ImageCopyTexture</span> <span class="token punctuation">{</span>
        texture<span class="token punctuation">:</span> <span class="token operator">&amp;</span>diffuse_texture<span class="token punctuation">,</span>
        mip_level<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        origin<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Origin3d</span><span class="token punctuation">::</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
        aspect<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureAspect</span><span class="token punctuation">::</span><span class="token class-name">All</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å®é™…åƒç´ æ•°æ®</span>
    <span class="token operator">&amp;</span>diffuse_rgba<span class="token punctuation">,</span>
    <span class="token comment">// çº¹ç†çš„å†…å­˜å¸ƒå±€</span>
    <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ImageDataLayout</span> <span class="token punctuation">{</span>
        offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        bytes_per_row<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>num<span class="token punctuation">::</span></span><span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> dimensions<span class="token number">.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        rows_per_image<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>num<span class="token punctuation">::</span></span><span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>dimensions<span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    texture_size<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="note"><p>å¡«å……çº¹ç†æ•°æ®çš„ç»å…¸æ–¹å¼æ˜¯å°†åƒç´ æ•°æ®å…ˆå¤åˆ¶åˆ°ä¸€ä¸ªç¼“å†²åŒºï¼Œç„¶åå†ä»ç¼“å†²åŒºå¤åˆ¶åˆ°çº¹ç†ä¸­ã€‚ä½¿ç”¨ <code>write_texture</code> æ›´æœ‰æ•ˆç‡ï¼Œå› ä¸ºå®ƒå°‘ç”¨äº†ä¸€ä¸ªç¼“å†²åŒº -- ä¸è¿‡è¿™é‡Œè¿˜æ˜¯ä»‹ç»ä¸€ä¸‹ï¼Œä»¥é˜²è¯»è€…æœ‰éœ€è¦ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> buffer <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_buffer_init</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span>util<span class="token punctuation">::</span></span><span class="token class-name">BufferInitDescriptor</span> <span class="token punctuation">{</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;Temp Buffer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        contents<span class="token punctuation">:</span> <span class="token operator">&amp;</span>diffuse_rgba<span class="token punctuation">,</span>
        usage<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferUsages</span><span class="token punctuation">::</span><span class="token constant">COPY_SRC</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span> encoder <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_command_encoder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">CommandEncoderDescriptor</span> <span class="token punctuation">{</span>
    label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;texture_buffer_copy_encoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

encoder<span class="token punctuation">.</span><span class="token function">copy_buffer_to_texture</span><span class="token punctuation">(</span>
    <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ImageCopyBuffer</span> <span class="token punctuation">{</span>
        buffer<span class="token punctuation">:</span> <span class="token operator">&amp;</span>buffer<span class="token punctuation">,</span>
        offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        bytes_per_row<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token operator">*</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span>
        rows_per_image<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ImageCopyTexture</span> <span class="token punctuation">{</span>
        texture<span class="token punctuation">:</span> <span class="token operator">&amp;</span>diffuse_texture<span class="token punctuation">,</span>
        mip_level<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        array_layer<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        origin<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Origin3d</span><span class="token punctuation">::</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    size<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

queue<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token namespace">std<span class="token punctuation">::</span>iter<span class="token punctuation">::</span></span><span class="token function">once</span><span class="token punctuation">(</span>encoder<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å€¼å¾—æ³¨æ„çš„æ˜¯ <code>bytes_per_row</code> å­—æ®µï¼Œè¿™ä¸ªå€¼éœ€è¦æ˜¯ 256 çš„å€æ•°ã€‚æŸ¥çœ‹ <a href="/learn-wgpu-zh/beginner/showcase/gifs/#how-do-we-make-the-frames" class="">gif æ•™ç¨‹</a> ä»¥äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p></div><h2 id="çº¹ç†è§†å›¾ä¸é‡‡æ ·å™¨" tabindex="-1"><a class="header-anchor" href="#çº¹ç†è§†å›¾ä¸é‡‡æ ·å™¨" aria-hidden="true">#</a> çº¹ç†è§†å›¾ä¸é‡‡æ ·å™¨</h2><p>ç°åœ¨çº¹ç†ä¸­å·²ç»æœ‰äº†æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥ä½¿ç”¨å®ƒã€‚è¿™ï¼Œå°±æ˜¯<strong>çº¹ç†è§†å›¾</strong>ï¼ˆ<code>TextureView</code>ï¼‰å’Œ<strong>é‡‡æ ·å™¨</strong>ï¼ˆ<code>Sampler</code>ï¼‰çš„ç”¨å¤„ã€‚</p><p><strong>çº¹ç†è§†å›¾</strong>æè¿°çº¹ç†åŠå…¶å…³è”çš„å…ƒæ•°æ®ã€‚<strong>é‡‡æ ·å™¨</strong>æ§åˆ¶çº¹ç†å¦‚ä½•è¢« <em>é‡‡æ ·</em>ã€‚é‡‡æ ·å·¥ä½œç±»ä¼¼äº GIMP/Photoshop ä¸­çš„æ»´ç®¡å·¥å…·ã€‚æˆ‘ä»¬çš„ç¨‹åºåœ¨çº¹ç†ä¸Šæä¾›ä¸€ä¸ªåæ ‡ï¼ˆè¢«ç§°ä¸º <em>çº¹ç†åæ ‡</em> ï¼‰ï¼Œç„¶åé‡‡æ ·å™¨æ ¹æ®çº¹ç†å’Œä¸€äº›å†…éƒ¨å‚æ•°è¿”å›ç›¸åº”çš„é¢œè‰²ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥å®šä¹‰ <code>diffuse_texture_view</code> å’Œ <code>diffuse_sampler</code>ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token comment">// æˆ‘ä»¬ä¸éœ€è¦è¿‡å¤šåœ°é…ç½®çº¹ç†è§†å›¾ï¼Œæ‰€ä»¥ä½¿ç”¨ wgpu çš„é»˜è®¤å€¼ã€‚</span>
<span class="token keyword">let</span> diffuse_texture_view <span class="token operator">=</span> diffuse_texture<span class="token punctuation">.</span><span class="token function">create_view</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureViewDescriptor</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_sampler <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_sampler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">SamplerDescriptor</span> <span class="token punctuation">{</span>
    address_mode_u<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">AddressMode</span><span class="token punctuation">::</span><span class="token class-name">ClampToEdge</span><span class="token punctuation">,</span>
    address_mode_v<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">AddressMode</span><span class="token punctuation">::</span><span class="token class-name">ClampToEdge</span><span class="token punctuation">,</span>
    address_mode_w<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">AddressMode</span><span class="token punctuation">::</span><span class="token class-name">ClampToEdge</span><span class="token punctuation">,</span>
    mag_filter<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">FilterMode</span><span class="token punctuation">::</span><span class="token class-name">Linear</span><span class="token punctuation">,</span>
    min_filter<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">FilterMode</span><span class="token punctuation">::</span><span class="token class-name">Nearest</span><span class="token punctuation">,</span>
    mipmap_filter<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">FilterMode</span><span class="token punctuation">::</span><span class="token class-name">Nearest</span><span class="token punctuation">,</span>
    <span class="token punctuation">..</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>address_mode_*</code> å‚æ•°æŒ‡å®šäº†å¦‚æœ<strong>é‡‡æ ·å™¨</strong>å¾—åˆ°çš„çº¹ç†åæ ‡è¶…å‡ºäº†çº¹ç†è¾¹ç•Œæ—¶è¯¥å¦‚ä½•å¤„ç†ã€‚æˆ‘ä»¬æœ‰å‡ ä¸ªé€‰é¡¹å¯ä¾›é€‰æ‹©ï¼š</p><ul><li><code>ClampToEdge</code>ï¼šä»»ä½•åœ¨çº¹ç†å¤–çš„çº¹ç†åæ ‡å°†è¿”å›ç¦»çº¹ç†è¾¹ç¼˜æœ€è¿‘çš„åƒç´ çš„é¢œè‰²ã€‚</li><li><code>Repeat</code>ã€‚å½“çº¹ç†åæ ‡è¶…è¿‡çº¹ç†çš„å°ºå¯¸æ—¶ï¼Œçº¹ç†å°†é‡å¤ã€‚</li><li><code>MirrorRepeat</code>ã€‚ç±»ä¼¼äº<code>Repeat</code>ï¼Œä½†å›¾åƒåœ¨è¶Šè¿‡è¾¹ç•Œæ—¶å°†ç¿»è½¬ã€‚</li></ul><p><img src="/learn-wgpu-zh/assets/img/address_mode.42b9c817.png" alt="address_mode.png"></p><p><code>mag_filter</code> ä¸ <code>min_filter</code> å­—æ®µæè¿°äº†å½“é‡‡æ ·è¶³è¿¹å°äºæˆ–å¤§äºä¸€ä¸ªçº¹ç´ ï¼ˆTexelï¼‰æ—¶è¯¥å¦‚ä½•å¤„ç†ã€‚å½“åœºæ™¯ä¸­çš„è´´å›¾è¿œç¦»æˆ–é è¿‘ camera æ—¶ï¼Œè¿™ä¸¤ä¸ªå­—æ®µçš„è®¾ç½®é€šå¸¸ä¼šæœ‰æ•ˆæœã€‚</p><p>æœ‰ 2 ä¸ªé€‰é¡¹:</p><ul><li><code>Linear</code>ï¼šåœ¨æ¯ä¸ªç»´åº¦ä¸­é€‰æ‹©ä¸¤ä¸ªçº¹ç´ ï¼Œå¹¶åœ¨å®ƒä»¬çš„å€¼ä¹‹é—´è¿”å›çº¿æ€§æ’å€¼ã€‚</li><li><code>Nearest</code>ï¼šè¿”å›ç¦»çº¹ç†åæ ‡æœ€è¿‘çš„çº¹ç´ çš„å€¼ã€‚è¿™åˆ›é€ äº†ä¸€ä¸ªä»è¿œå¤„çœ‹æ¯”è¾ƒæ¸…æ™°ä½†è¿‘å¤„æœ‰åƒç´ çš„å›¾åƒã€‚ç„¶è€Œï¼Œå¦‚æœä½ çš„çº¹ç†è¢«è®¾è®¡æˆåƒç´ åŒ–çš„ï¼Œæ¯”å¦‚åƒç´ è‰ºæœ¯æ¸¸æˆï¼Œæˆ–è€…åƒ Minecraft è¿™æ ·çš„ä½“ç´ æ¸¸æˆï¼Œè¿™å¯èƒ½æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚</li></ul><p>Mipmaps æ˜¯ä¸€ä¸ªå¤æ‚çš„è¯é¢˜ï¼Œéœ€è¦åœ¨æœªæ¥å•ç‹¬å†™ä¸€ä¸ªç« èŠ‚ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ <code>mipmap_filter</code> çš„åŠŸèƒ½æœ‰ç‚¹ç±»ä¼¼äº <code>(mag/min)_filter</code>ï¼Œå› ä¸ºå®ƒå‘Šè¯‰é‡‡æ ·å™¨å¦‚ä½•åœ¨ mipmaps ä¹‹é—´æ··åˆã€‚</p><p>å…¶ä»–å­—æ®µä½¿ç”¨äº†é»˜è®¤å€¼ã€‚å¦‚æœæƒ³äº†è§£å­—æ®µè¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹ <a href="https://docs.rs/wgpu/latest/wgpu/struct.SamplerDescriptor.html" target="_blank" rel="noopener noreferrer">wgpu æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>BindGroup</code> å’Œ <code>PipelineLayout</code> æ¥å°†æ‰€æœ‰è¿™äº›ä¸åŒçš„èµ„æºéƒ½æ¥å…¥ã€‚</p><h2 id="ç»‘å®šç»„" tabindex="-1"><a class="header-anchor" href="#ç»‘å®šç»„" aria-hidden="true">#</a> ç»‘å®šç»„</h2><p><strong>ç»‘å®šç»„</strong>ï¼ˆ<code>BindGroup</code>ï¼‰æè¿°äº†ä¸€ç»„èµ„æºä»¥åŠå¦‚ä½•é€šè¿‡ç€è‰²å™¨è®¿é—®å®ƒä»¬ã€‚æˆ‘ä»¬å…ˆæ¥åˆ›å»ºä¸€ä¸ª<strong>ç»‘å®šç»„å¸ƒå±€</strong>ï¼ˆ<code>BindGroupLayout</code>ï¼‰ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> texture_bind_group_layout <span class="token operator">=</span>
            device<span class="token punctuation">.</span><span class="token function">create_bind_group_layout</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupLayoutDescriptor</span> <span class="token punctuation">{</span>
                entries<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
                    <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupLayoutEntry</span> <span class="token punctuation">{</span>
                        binding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                        visibility<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ShaderStages</span><span class="token punctuation">::</span><span class="token constant">FRAGMENT</span><span class="token punctuation">,</span>
                        ty<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindingType</span><span class="token punctuation">::</span><span class="token class-name">Texture</span> <span class="token punctuation">{</span>
                            multisampled<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                            view_dimension<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureViewDimension</span><span class="token punctuation">::</span><span class="token constant">D2</span><span class="token punctuation">,</span>
                            sample_type<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureSampleType</span><span class="token punctuation">::</span><span class="token class-name">Float</span> <span class="token punctuation">{</span> filterable<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        count<span class="token punctuation">:</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupLayoutEntry</span> <span class="token punctuation">{</span>
                        binding<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                        visibility<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ShaderStages</span><span class="token punctuation">::</span><span class="token constant">FRAGMENT</span><span class="token punctuation">,</span>
                        <span class="token comment">// This should match the filterable field of the</span>
                        <span class="token comment">// corresponding Texture entry above.</span>
                        ty<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindingType</span><span class="token punctuation">::</span><span class="token class-name">Sampler</span><span class="token punctuation">(</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">SamplerBindingType</span><span class="token punctuation">::</span><span class="token class-name">Filtering</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        count<span class="token punctuation">:</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;texture_bind_group_layout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>texture_bind_group_layout</code> æœ‰ä¸¤ä¸ªæ¡ç›®ï¼šä¸€ä¸ªæ˜¯ç»‘å®šåˆ° 0 èµ„æºæ§½çš„<strong>çº¹ç†</strong>ï¼Œå¦ä¸€ä¸ªæ˜¯ç»‘å®šåˆ° 1 èµ„æºæ§½çš„<strong>é‡‡æ ·å™¨</strong>ã€‚è¿™ä¸¤ä¸ªç»‘å®šåªå¯¹ç”± <code>visibility</code> å­—æ®µæŒ‡å®šçš„ç‰‡å…ƒç€è‰²å™¨å¯è§ã€‚è¿™ä¸ªå­—æ®µçš„å¯é€‰å€¼æ˜¯ <code>NONE</code>ã€<code>VERTEX</code>ã€<code>FRAGMENT</code> æˆ– <code>COMPUTE</code> çš„ä»»æ„æŒ‰ä½æˆ–ï¼ˆ<code>|</code>ï¼‰ç»„åˆã€‚</p><p>ç°åœ¨ä½¿ç”¨<strong>ç»‘å®šç»„å¸ƒå±€</strong>ï¼ˆ<code>texture_bind_group_layout</code>ï¼‰æ¥åˆ›å»ºç»‘å®šç»„ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> diffuse_bind_group <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_bind_group</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupDescriptor</span> <span class="token punctuation">{</span>
        layout<span class="token punctuation">:</span> <span class="token operator">&amp;</span>texture_bind_group_layout<span class="token punctuation">,</span>
        entries<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
            <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupEntry</span> <span class="token punctuation">{</span>
                binding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                resource<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindingResource</span><span class="token punctuation">::</span><span class="token class-name">TextureView</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_texture_view<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupEntry</span> <span class="token punctuation">{</span>
                binding<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                resource<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindingResource</span><span class="token punctuation">::</span><span class="token class-name">Sampler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_sampler<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;diffuse_bind_group&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹ç€è¿™ä¸ªï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸€ç‚¹ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰! è¿™æ˜¯å› ä¸º<strong>ç»‘å®šç»„</strong>æ˜¯<strong>ç»‘å®šç»„å¸ƒå±€</strong>çš„ä¸€ä¸ªæ›´å…·ä½“çš„å£°æ˜ã€‚å®ƒä»¬åˆ†å¼€çš„åŸå› æ˜¯ï¼Œåªè¦æ˜¯å…±äº«åŒä¸€ä¸ªç»‘å®šç»„å¸ƒå±€çš„ç»‘å®šç»„ï¼Œå°±èƒ½åœ¨è¿è¡Œæ—¶å®æ—¶åˆ‡æ¢ã€‚åˆ›å»ºçš„æ¯ä¸ªçº¹ç†å’Œé‡‡æ ·å™¨éƒ½éœ€è¦æ·»åŠ åˆ°ä¸€ä¸ªç»‘å®šç»„ä¸­ã€‚ä¸ºäº†è¾¾æˆç›®çš„ï¼Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸ªçº¹ç†åˆ›å»ºä¸€ä¸ªæ–°çš„ç»‘å®šç»„ã€‚</p><p>è®©æˆ‘ä»¬æŠŠ <code>diffuse_bind_group</code> æ·»åŠ åˆ° <code>State</code> ç»“æ„ä½“ä¸­ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">struct</span> <span class="token type-definition class-name">State</span> <span class="token punctuation">{</span>
    surface<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Surface</span><span class="token punctuation">,</span>
    device<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Device</span><span class="token punctuation">,</span>
    queue<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Queue</span><span class="token punctuation">,</span>
    config<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">SurfaceConfiguration</span><span class="token punctuation">,</span>
    size<span class="token punctuation">:</span> <span class="token namespace">winit<span class="token punctuation">::</span>dpi<span class="token punctuation">::</span></span><span class="token class-name">PhysicalSize</span><span class="token operator">&lt;</span><span class="token keyword">u32</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    render_pipeline<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">RenderPipeline</span><span class="token punctuation">,</span>
    vertex_buffer<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Buffer</span><span class="token punctuation">,</span>
    index_buffer<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Buffer</span><span class="token punctuation">,</span>
    num_indices<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
    diffuse_bind_group<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroup</span><span class="token punctuation">,</span> <span class="token comment">// æ–°æ·»åŠ !</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¡®ä¿æˆ‘ä»¬åœ¨ <code>new()</code> å‡½æ•°ä¸­è¿”å›è¿™ä¸ªå­—æ®µï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">impl</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">Self</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            <span class="token comment">// æ–°æ·»åŠ !</span>
            diffuse_bind_group<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åœ¨ <code>render()</code> å‡½æ•°ä¸­ä½¿ç”¨ç»‘å®šç»„:</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token comment">// render()</span>
<span class="token comment">// ...</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_pipeline</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>render_pipeline<span class="token punctuation">)</span><span class="token punctuation">;</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_bind_group</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>diffuse_bind_group<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NEW!</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_vertex_buffer</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>vertex_buffer<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_index_buffer</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>index_buffer<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">IndexFormat</span><span class="token punctuation">::</span><span class="token class-name">Uint16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

render_pass<span class="token punctuation">.</span><span class="token function">draw_indexed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token keyword">self</span><span class="token punctuation">.</span>num_indices<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç®¡çº¿å¸ƒå±€" tabindex="-1"><a class="header-anchor" href="#ç®¡çº¿å¸ƒå±€" aria-hidden="true">#</a> ç®¡çº¿å¸ƒå±€</h2><p>è¿˜è®°å¾—åœ¨<a href="/learn-wgpu-zh/beginner/tutorial3-pipeline#how-do-we-use-the-shaders">ç®¡çº¿</a>ç« èŠ‚åˆ›å»ºçš„<strong>ç®¡çº¿å¸ƒå±€</strong>ï¼ˆ<code>PipelineLayout</code>ï¼‰å—ï¼Ÿç°åœ¨æˆ‘ä»¬ç»ˆäºå¯ä»¥ä½¿ç”¨å®ƒäº†! ç®¡çº¿å¸ƒå±€åŒ…å«ä¸€ä¸ªç®¡çº¿å¯ä»¥ä½¿ç”¨çš„<strong>ç»‘å®šç»„å¸ƒå±€</strong>çš„åˆ—è¡¨ã€‚ä¿®æ”¹ <code>render_pipeline_layout</code> ä»¥ä½¿ç”¨ <code>texture_bind_group_layout</code>ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">let</span> render_pipeline_layout <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_pipeline_layout</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">PipelineLayoutDescriptor</span> <span class="token punctuation">{</span>
            label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;Render Pipeline Layout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            bind_group_layouts<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>texture_bind_group_layout<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æ–°æ·»åŠ !</span>
            push_constant_ranges<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¿®æ”¹-vertices-å¸¸é‡" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹-vertices-å¸¸é‡" aria-hidden="true">#</a> ä¿®æ”¹ VERTICES å¸¸é‡</h2><p>å¯¹äº <code>Vertex</code> çš„å®šä¹‰æœ‰å‡ å¤„éœ€è¦ä¿®æ”¹ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨ <code>color</code> å­—æ®µæ¥è®¾ç½®ç½‘æ ¼é¢œè‰²ã€‚ç°åœ¨æˆ‘ä»¬è¦ç”¨ <code>tex_coords</code> ä»£æ›¿ <code>color</code>ï¼Œè¿™äº›åæ ‡ä¼šè¢«ä¼ é€’ç»™é‡‡æ ·å™¨ä»¥è·å–<strong>çº¹ç´ </strong>ï¼ˆTexelï¼‰çš„é¢œè‰²ã€‚</p><p>ç”±äº <code>tex_coords</code> æ˜¯äºŒç»´çš„ï¼Œéœ€è¦ä¿®æ”¹è¿™ä¸ªå­—æ®µçš„ç±»å‹ä¸ºä¸¤ä¸ªæµ®ç‚¹æ•°çš„æ•°ç»„ã€‚</p><p>å…ˆæ¥ä¿®æ”¹ <code>Vertex</code> ç»“æ„ä½“ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[repr(C)]</span>
<span class="token attribute attr-name">#[derive(Copy, Clone, Debug, bytemuck::Pod, bytemuck::Zeroable)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Vertex</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æ–°æ·»åŠ !</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶ååœ¨ <code>VertexBufferLayout</code> ä¸­åæ˜ è¿™äº›å˜åŒ–ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">impl</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">desc</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;a</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;a</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span></span>mem<span class="token punctuation">;</span>
        <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span> <span class="token punctuation">{</span>
            array_stride<span class="token punctuation">:</span> <span class="token namespace">mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">Vertex</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span>
            step_mode<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexStepMode</span><span class="token punctuation">::</span><span class="token class-name">Vertex</span><span class="token punctuation">,</span>
            attributes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
                <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexAttribute</span> <span class="token punctuation">{</span>
                    offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    shader_location<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexFormat</span><span class="token punctuation">::</span><span class="token class-name">Float32x3</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexAttribute</span> <span class="token punctuation">{</span>
                    offset<span class="token punctuation">:</span> <span class="token namespace">mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span>
                    shader_location<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexFormat</span><span class="token punctuation">::</span><span class="token class-name">Float32x2</span><span class="token punctuation">,</span> <span class="token comment">// NEW!</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œéœ€è¦ä¿®æ”¹ <code>VERTICES</code>ï¼Œç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢ç°æœ‰çš„å®šä¹‰ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token comment">// Changed</span>
<span class="token keyword">const</span> <span class="token constant">VERTICES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">Vertex</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.0868241</span><span class="token punctuation">,</span> <span class="token number">0.49240386</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.4131759</span><span class="token punctuation">,</span> <span class="token number">0.99240386</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0048659444</span><span class="token punctuation">,</span> <span class="token number">0.56958647</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.28081453</span><span class="token punctuation">,</span> <span class="token number">0.05060294</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.35966998</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.3473291</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.85967</span><span class="token punctuation">,</span> <span class="token number">0.1526709</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// D</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.9414737</span><span class="token punctuation">,</span> <span class="token number">0.7347359</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¿®æ”¹ç€è‰²å™¨" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹ç€è‰²å™¨" aria-hidden="true">#</a> ä¿®æ”¹ç€è‰²å™¨</h2><p>æœ‰äº†æ–°çš„ <code>Vertex</code> ç»“æ„ä½“ï¼Œç°åœ¨æ˜¯æ—¶å€™æ›´æ–°ç€è‰²å™¨äº†ã€‚é¦–å…ˆéœ€è¦å°† <code>tex_coords</code> ä¼ é€’ç»™é¡¶ç‚¹ç€è‰²å™¨ï¼Œç„¶åå°†å®ƒä»¬ç”¨äºç‰‡å…ƒç€è‰²å™¨ï¼Œä»¥ä¾¿ä»é‡‡æ ·å™¨è·å¾—æœ€ç»ˆçš„é¢œè‰²ã€‚è®©æˆ‘ä»¬ä»é¡¶ç‚¹ç€è‰²å™¨å¼€å§‹ï¼š</p><div class="language-wgsl ext-wgsl line-numbers-mode"><pre class="language-wgsl"><code><span class="token comment">// é¡¶ç‚¹ç€è‰²å™¨</span>

<span class="token keyword">struct</span> <span class="token class-name">VertexInput</span> <span class="token punctuation">{</span>
    <span class="token punctuation">@</span><span class="token attributes attr-name">location</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span> position<span class="token punctuation">:</span> <span class="token builtin">vec3</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
    <span class="token punctuation">@</span><span class="token attributes attr-name">location</span><span class="token punctuation">(</span><span class="token int-literal number">1</span><span class="token punctuation">)</span> tex_coords<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">VertexOutput</span> <span class="token punctuation">{</span>
    <span class="token punctuation">@</span><span class="token builtin-attribute"><span class="token attribute attr-name">builtin</span><span class="token punctuation">(</span><span class="token built-in-values attr-value">position</span><span class="token punctuation">)</span></span> clip_position<span class="token punctuation">:</span> <span class="token builtin">vec4</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
    <span class="token punctuation">@</span><span class="token attributes attr-name">location</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span> tex_coords<span class="token punctuation">:</span> <span class="token builtin">vec2</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token punctuation">@</span><span class="token attributes attr-name">vertex</span>
<span class="token keyword">fn</span> <span class="token functions function">vs_main</span><span class="token punctuation">(</span>
    model<span class="token punctuation">:</span> <span class="token class-name">VertexInput</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">VertexOutput</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> out<span class="token punctuation">:</span> <span class="token class-name">VertexOutput</span><span class="token punctuation">;</span>
    out<span class="token punctuation">.</span>tex_coords <span class="token operator">=</span> model<span class="token punctuation">.</span>tex_coords<span class="token punctuation">;</span>
    out<span class="token punctuation">.</span>clip_position <span class="token operator">=</span> <span class="token builtin">vec4</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>position<span class="token punctuation">,</span> <span class="token decimal-float-literal number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨é¡¶ç‚¹ç€è‰²å™¨è¾“å‡ºäº† <code>tex_coords</code>ï¼Œæˆ‘ä»¬éœ€è¦æ”¹å˜ç‰‡å…ƒç€è‰²å™¨æ¥æ¥æ”¶å®ƒä»¬ã€‚æœ‰äº†è¿™äº›åæ ‡ï¼Œå°±å¯ä»¥ä½¿ç”¨é‡‡æ ·å™¨ä»çº¹ç†ä¸­è·å–<strong>çº¹ç´ </strong>çš„é¢œè‰²äº†:</p><div class="language-wgsl ext-wgsl line-numbers-mode"><pre class="language-wgsl"><code><span class="token comment">// ç‰‡å…ƒç€è‰²å™¨</span>

<span class="token punctuation">@</span><span class="token attributes attr-name">group</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span> <span class="token punctuation">@</span><span class="token attributes attr-name">binding</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> t_diffuse<span class="token punctuation">:</span> <span class="token builtin">texture_2d</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">@</span><span class="token attributes attr-name">group</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span><span class="token punctuation">@</span><span class="token attributes attr-name">binding</span><span class="token punctuation">(</span><span class="token int-literal number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> s_diffuse<span class="token punctuation">:</span> <span class="token builtin">sampler</span><span class="token punctuation">;</span>

<span class="token punctuation">@</span><span class="token attributes attr-name">fragment</span>
<span class="token keyword">fn</span> <span class="token functions function">fs_main</span><span class="token punctuation">(</span>in<span class="token punctuation">:</span> <span class="token class-name">VertexOutput</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">@</span><span class="token attributes attr-name">location</span><span class="token punctuation">(</span><span class="token int-literal number">0</span><span class="token punctuation">)</span> <span class="token builtin">vec4</span><span class="token punctuation">&lt;</span><span class="token builtin">f32</span><span class="token punctuation">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token builtin">textureSample</span><span class="token punctuation">(</span>t_diffuse<span class="token punctuation">,</span> s_diffuse<span class="token punctuation">,</span> in<span class="token punctuation">.</span>tex_coords<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å˜é‡ <code>t_diffuse</code> å’Œ <code>s_diffuse</code> å°±æ˜¯æ‰€è°“çš„ uniformsã€‚æˆ‘ä»¬å°†åœ¨ <a href="/learn-wgpu-zh/beginner/tutorial6-uniforms/" class="">ç›¸æœºéƒ¨åˆ†</a> ä¸­è¿›ä¸€æ­¥è®¨è®º uniformsã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œ<code>@group(x)</code> å¯¹åº”äº <code>set_bind_group()</code> ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ<code>@binding(x)</code> ä¸æˆ‘ä»¬åˆ›å»º<strong>ç»‘å®šç»„å¸ƒå±€</strong>å’Œ<strong>ç»‘å®šç»„</strong>æ—¶æŒ‡å®šçš„ <code>binding</code> å€¼å¯¹åº”ã€‚</p><h2 id="æ¸²æŸ“ç»“æœ" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“ç»“æœ" aria-hidden="true">#</a> æ¸²æŸ“ç»“æœ</h2><p>ç°åœ¨è¿è¡Œæˆ‘ä»¬çš„ç¨‹åºï¼Œå°†å¾—åˆ°å¦‚ä¸‹æ¸²æŸ“æ•ˆæœï¼š</p><p><img src="/learn-wgpu-zh/assets/img/upside-down.339a3f11.png" alt="an upside down tree on a hexagon"></p><p>å¾ˆå¥‡æ€ªï¼Œæˆ‘ä»¬çš„æ ‘æ˜¯é¢ å€’çš„! è¿™æ˜¯å› ä¸º wgpu çš„ä¸–ç•Œåæ ‡çš„ Y è½´æœä¸Šï¼Œè€Œçº¹ç†åæ ‡çš„ Y è½´æœä¸‹ã€‚æ¢å¥è¯è¯´ï¼Œçº¹ç†åæ ‡ä¸­çš„ï¼ˆ0ï¼Œ0ï¼‰å¯¹åº”äºå›¾åƒçš„å·¦ä¸Šæ–¹ï¼Œè€Œï¼ˆ1ï¼Œ1ï¼‰æ˜¯å³ä¸‹æ–¹ï¼š</p><p><img src="/learn-wgpu-zh/assets/img/happy-tree-uv-coords.f9a04507.png" alt="happy-tree-uv-coords.png"></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ¯ä¸ªçº¹ç†åæ ‡çš„ y åæ ‡æ›¿æ¢ä¸º <code>1 - y</code> æ¥å¾—åˆ°çº¹ç†çš„æ­£ç¡®æœå‘ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">const</span> <span class="token constant">VERTICES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">Vertex</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    <span class="token comment">// ä¿®æ”¹åçš„</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.0868241</span><span class="token punctuation">,</span> <span class="token number">0.49240386</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.4131759</span><span class="token punctuation">,</span> <span class="token number">0.00759614</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0048659444</span><span class="token punctuation">,</span> <span class="token number">0.43041354</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.28081453</span><span class="token punctuation">,</span> <span class="token number">0.949397</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.35966998</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.3473291</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.85967</span><span class="token punctuation">,</span> <span class="token number">0.84732914</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// D</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.9414737</span><span class="token punctuation">,</span> <span class="token number">0.2652641</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬å°±æŠŠæ ‘æ­£ç¡®åœ°æ”¾åœ¨å…­è¾¹å½¢ä¸Šäº†:</p><p><img src="/learn-wgpu-zh/assets/img/rightside-up.a56e3453.png" alt="our happy tree as it should be"></p><h2 id="ä»£ç æ•´ç†" tabindex="-1"><a class="header-anchor" href="#ä»£ç æ•´ç†" aria-hidden="true">#</a> ä»£ç æ•´ç†</h2><p>ä¸ºæ–¹ä¾¿èµ·è§ï¼Œè®©æˆ‘ä»¬æŠŠçº¹ç†ä»£ç æ”¾åˆ°è‡ªå·±çš„æ¨¡å—ä¸­ã€‚æˆ‘ä»¬é¦–å…ˆå°† <a href="https://docs.rs/anyhow/" target="_blank" rel="noopener noreferrer">anyhow<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <strong>åŒ…</strong>æ·»åŠ åˆ° <code>Cargo.toml</code> æ–‡ä»¶ä¸­ï¼Œä»¥ç®€åŒ–é”™è¯¯å¤„ç†ï¼š</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">image</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.23&quot;</span>
<span class="token key property">cgmath</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.18&quot;</span>
<span class="token key property">winit</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.26&quot;</span>
<span class="token key property">env_logger</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.9&quot;</span>
<span class="token key property">log</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4&quot;</span>
<span class="token key property">pollster</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.2&quot;</span>
<span class="token key property">wgpu</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.13&quot;</span>
<span class="token key property">bytemuck</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.4&quot;</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;derive&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token key property">anyhow</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0&quot;</span> <span class="token comment"># NEW!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œåœ¨ä¸€ä¸ªåä¸º <code>src/texture.rs</code> çš„æ–°æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">image<span class="token punctuation">::</span></span><span class="token class-name">GenericImageView</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">anyhow<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">Texture</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> texture<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Texture</span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> view<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureView</span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> sampler<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Sampler</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">Texture</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">from_bytes</span><span class="token punctuation">(</span>
        device<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Device</span><span class="token punctuation">,</span>
        queue<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Queue</span><span class="token punctuation">,</span>
        bytes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token keyword">u8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
        label<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span>
    <span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token namespace">image<span class="token punctuation">::</span></span><span class="token function">load_from_memory</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token function">from_image</span><span class="token punctuation">(</span>device<span class="token punctuation">,</span> queue<span class="token punctuation">,</span> <span class="token operator">&amp;</span>img<span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">from_image</span><span class="token punctuation">(</span>
        device<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Device</span><span class="token punctuation">,</span>
        queue<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Queue</span><span class="token punctuation">,</span>
        img<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token namespace">image<span class="token punctuation">::</span></span><span class="token class-name">DynamicImage</span><span class="token punctuation">,</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> rgba <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">to_rgba8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> dimensions <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">dimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> size <span class="token operator">=</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Extent3d</span> <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
            depth_or_array_layers<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> texture <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_texture</span><span class="token punctuation">(</span>
            <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureDescriptor</span> <span class="token punctuation">{</span>
                label<span class="token punctuation">,</span>
                size<span class="token punctuation">,</span>
                mip_level_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                sample_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                dimension<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureDimension</span><span class="token punctuation">::</span><span class="token constant">D2</span><span class="token punctuation">,</span>
                format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureFormat</span><span class="token punctuation">::</span><span class="token class-name">Rgba8UnormSrgb</span><span class="token punctuation">,</span>
                usage<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureUsages</span><span class="token punctuation">::</span><span class="token constant">TEXTURE_BINDING</span> <span class="token operator">|</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureUsages</span><span class="token punctuation">::</span><span class="token constant">COPY_DST</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        queue<span class="token punctuation">.</span><span class="token function">write_texture</span><span class="token punctuation">(</span>
            <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ImageCopyTexture</span> <span class="token punctuation">{</span>
                aspect<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureAspect</span><span class="token punctuation">::</span><span class="token class-name">All</span><span class="token punctuation">,</span>
                texture<span class="token punctuation">:</span> <span class="token operator">&amp;</span>texture<span class="token punctuation">,</span>
                mip_level<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                origin<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Origin3d</span><span class="token punctuation">::</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token operator">&amp;</span>rgba<span class="token punctuation">,</span>
            <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">ImageDataLayout</span> <span class="token punctuation">{</span>
                offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                bytes_per_row<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>num<span class="token punctuation">::</span></span><span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> dimensions<span class="token number">.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                rows_per_image<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>num<span class="token punctuation">::</span></span><span class="token class-name">NonZeroU32</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>dimensions<span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            size<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> view <span class="token operator">=</span> texture<span class="token punctuation">.</span><span class="token function">create_view</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">TextureViewDescriptor</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> sampler <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_sampler</span><span class="token punctuation">(</span>
            <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">SamplerDescriptor</span> <span class="token punctuation">{</span>
                address_mode_u<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">AddressMode</span><span class="token punctuation">::</span><span class="token class-name">ClampToEdge</span><span class="token punctuation">,</span>
                address_mode_v<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">AddressMode</span><span class="token punctuation">::</span><span class="token class-name">ClampToEdge</span><span class="token punctuation">,</span>
                address_mode_w<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">AddressMode</span><span class="token punctuation">::</span><span class="token class-name">ClampToEdge</span><span class="token punctuation">,</span>
                mag_filter<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">FilterMode</span><span class="token punctuation">::</span><span class="token class-name">Linear</span><span class="token punctuation">,</span>
                min_filter<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">FilterMode</span><span class="token punctuation">::</span><span class="token class-name">Nearest</span><span class="token punctuation">,</span>
                mipmap_filter<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">FilterMode</span><span class="token punctuation">::</span><span class="token class-name">Nearest</span><span class="token punctuation">,</span>
                <span class="token punctuation">..</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token keyword">Self</span> <span class="token punctuation">{</span> texture<span class="token punctuation">,</span> view<span class="token punctuation">,</span> sampler <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="note"><p>æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>to_rgba8()</code> è€Œä¸æ˜¯ <code>as_rgba8()</code>ã€‚PNG ä½¿ç”¨ <code>as_rgba8()</code> æ²¡é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬æœ‰ä¸€ä¸ª alpha é€šé“ã€‚ä½†æ˜¯ JPEG æ²¡æœ‰ alpha é€šé“ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾åœ¨ JPEG çº¹ç†å›¾åƒä¸Šè°ƒç”¨ <code>as_rgba8()</code>ï¼Œä»£ç å°±ä¼šé™·å…¥ææ…Œã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>to_rgba8()</code> æ¥å¤„ç†æ²¡æœ‰ alpha é€šé“çš„å›¾åƒï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å›¾åƒç¼“å†²åŒºã€‚</p></div><p>åœ¨ <code>lib.rs</code> æ–‡ä»¶çš„é¡¶éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç æ¥å°† <code>texture.rs</code> ä½œä¸ºä¸€ä¸ªæ¨¡å—å¯¼å…¥ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">mod</span> <span class="token module-declaration namespace">texture</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>new()</code> å‡½æ•°ä¸­çš„çº¹ç†åˆ›å»ºä»£ç ç°åœ¨å˜å¾—ç®€åŒ–å¤šäº†ï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code>surface<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>device<span class="token punctuation">,</span> <span class="token operator">&amp;</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_bytes <span class="token operator">=</span> <span class="token macro property">include_bytes!</span><span class="token punctuation">(</span><span class="token string">&quot;happy-tree.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// CHANGED!</span>
<span class="token keyword">let</span> diffuse_texture <span class="token operator">=</span> <span class="token namespace">texture<span class="token punctuation">::</span></span><span class="token class-name">Texture</span><span class="token punctuation">::</span><span class="token function">from_bytes</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>device<span class="token punctuation">,</span> <span class="token operator">&amp;</span>queue<span class="token punctuation">,</span> diffuse_bytes<span class="token punctuation">,</span> <span class="token string">&quot;happy-tree.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// CHANGED!</span>

<span class="token comment">// åˆ° `let texture_bind_group_layout = ...` è¡Œä¸ºæ­¢çš„æ‰€æœ‰ä»£ç ç°åœ¨éƒ½å¯ä»¥ç§»é™¤äº†ã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä»ç„¶éœ€è¦å•ç‹¬å­˜å‚¨<strong>ç»‘å®šç»„</strong>ï¼Œå› ä¸ºçº¹ç†æ— é¡»çŸ¥é“ç»‘å®šç»„çš„å¸ƒå±€ã€‚ä¿®æ”¹åˆ›å»º <code>diffuse_bind_group</code> çš„è¿‡ç¨‹ä»¥ä½¿ç”¨<code>diffuse_texture</code> çš„ <code>view</code> å’Œ <code>sampler</code> å­—æ®µ:</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> diffuse_bind_group <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_bind_group</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupDescriptor</span> <span class="token punctuation">{</span>
        layout<span class="token punctuation">:</span> <span class="token operator">&amp;</span>texture_bind_group_layout<span class="token punctuation">,</span>
        entries<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
            <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupEntry</span> <span class="token punctuation">{</span>
                binding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                resource<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindingResource</span><span class="token punctuation">::</span><span class="token class-name">TextureView</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_texture<span class="token punctuation">.</span>view<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// CHANGED!</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroupEntry</span> <span class="token punctuation">{</span>
                binding<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                resource<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindingResource</span><span class="token punctuation">::</span><span class="token class-name">Sampler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_texture<span class="token punctuation">.</span>sampler<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// CHANGED!</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;diffuse_bind_group&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œéœ€è¦æ›´æ–° <code>State</code> ä¸­çš„å­—æ®µä»¥ä½¿ç”¨å…¨æ–° <code>Texture</code> ç»“æ„ä½“ï¼Œåœ¨æœªæ¥çš„æ•™ç¨‹ä¸­è¿˜ä¼šç”¨åˆ°å®ƒï¼š</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">struct</span> <span class="token type-definition class-name">State</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    diffuse_bind_group<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BindGroup</span><span class="token punctuation">,</span>
    diffuse_texture<span class="token punctuation">:</span> <span class="token namespace">texture<span class="token punctuation">::</span></span><span class="token class-name">Texture</span><span class="token punctuation">,</span> <span class="token comment">// NEW</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">impl</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">Self</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            num_indices<span class="token punctuation">,</span>
            diffuse_bind_group<span class="token punctuation">,</span>
            diffuse_texture<span class="token punctuation">,</span> <span class="token comment">// NEW</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»è¿‡ä¸Šè¾¹çš„æ•´ç†ï¼Œä»£ç çš„å·¥ä½œæ–¹å¼è¿˜å’Œä»¥å‰ä¸€æ ·ï¼Œä½†æˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªæ›´ä¾¿åˆ©çš„æ–¹å¼æ¥åˆ›å»ºçº¹ç†ã€‚</p><h2 id="æŒ‘æˆ˜" tabindex="-1"><a class="header-anchor" href="#æŒ‘æˆ˜" aria-hidden="true">#</a> æŒ‘æˆ˜</h2><p>å¦åˆ›å»ºä¸€ä¸ªçº¹ç†ï¼Œå¹¶åœ¨ä½ æŒ‰ä¸‹ç©ºæ ¼é”®æ—¶äº¤æ›¿ä½¿ç”¨ã€‚</p><div id="wasm-example"><!----><button>Try Tutorial5_textures!</button></div><div class="auto-github-link"><a href="https://github.com/jinleili/learn-wgpu-zh/tree/master/code/beginner/tutorial5-textures/" target="_blank" rel="noopener noreferrer"> &quot;æŸ¥çœ‹æºç ï¼&quot; </a><!----></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/learn-wgpu-zh/beginner/tutorial4-buffer/" class="" aria-label="ç¼“å†²åŒºä¸ç´¢å¼•"><!--[--><!--]--> ç¼“å†²åŒºä¸ç´¢å¼• <!--[--><!--]--></a></span><span class="next"><a href="/learn-wgpu-zh/beginner/tutorial6-uniforms/" class="" aria-label="Uniform ç¼“å†²åŒºä¸ 3D è™šæ‹Ÿæ‘„åƒæœº"><!--[--><!--]--> Uniform ç¼“å†²åŒºä¸ 3D è™šæ‹Ÿæ‘„åƒæœº <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/learn-wgpu-zh/assets/js/runtime~app.68211571.js" defer></script><script src="/learn-wgpu-zh/assets/js/3866.84df6019.js" defer></script><script src="/learn-wgpu-zh/assets/js/app.986ad84b.js" defer></script>
  </body>
</html>
