<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¾èµ–ä¸çª—å£ | å­¦ä¹  wgpu</title>
    <meta name="description" content="wgpuï¼šé¢å‘ä¸‹ä¸€ä¸ªåå¹´çš„è·¨å¹³å°å›¾å½¢æ¥å£ WebGPU çš„ Rust å®ç°">
    <link rel="preload stylesheet" href="/learn-wgpu-zh/assets/style.70b949c6.css" as="style">
    <link rel="modulepreload" href="/learn-wgpu-zh/assets/app.71ba3d0d.js">
    <link rel="modulepreload" href="/learn-wgpu-zh/assets/beginner_tutorial1-window.md.3e3b70ac.lean.js">
    
    <link rel="icon" href="/learn-wgpu-zh/favicon.svg">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-93a960b4><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-93a960b4 data-v-0fa0e57d><div class="VPNavBar has-sidebar" data-v-0fa0e57d data-v-be450ad9><div class="container" data-v-be450ad9><div class="title" data-v-be450ad9><div class="VPNavBarTitle has-sidebar" data-v-be450ad9 data-v-6d2fb2d9><a class="title" href="/learn-wgpu-zh/" data-v-6d2fb2d9><!--[--><!--]--><!--[--><img class="VPImage logo" src="/learn-wgpu-zh/res/wgpu-logo.png" alt data-v-6db2186b><!--]--><!--[-->å­¦ä¹  wgpu<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-be450ad9><div class="curtain" data-v-be450ad9></div><div class="content-body" data-v-be450ad9><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-be450ad9 data-v-bdedfc22><span id="main-nav-aria-label" class="visually-hidden" data-v-bdedfc22>Main Navigation</span><!--[--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-be450ad9 data-v-fdaf79b7 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96001b6b><span class="text" data-v-96001b6b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-96001b6b><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg>  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96001b6b><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><!----><!--[--><!--[--><div class="items" data-v-fdaf79b7><p class="title" data-v-fdaf79b7>ä¸­æ–‡</p><!--[--><div class="VPMenuLink" data-v-fdaf79b7 data-v-a5bbb52c><a class="VPLink link" href="https://sotrh.github.io/learn-wgpu/beginner/tutorial1-window" target="_blank" rel="noreferrer" data-v-a5bbb52c data-v-30c06bd3><!--[-->English<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-be450ad9 data-v-da3f667a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-da3f667a data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-be450ad9 data-v-2ab2a029 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/jinleili/learn-wgpu-zh" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-be450ad9 data-v-f38c483a data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-96001b6b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-96001b6b><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><!----><!--[--><!--[--><div class="group" data-v-f38c483a><p class="trans-title" data-v-f38c483a>ä¸­æ–‡</p><!--[--><div class="VPMenuLink" data-v-f38c483a data-v-a5bbb52c><a class="VPLink link" href="https://sotrh.github.io/learn-wgpu/beginner/tutorial1-window" target="_blank" rel="noreferrer" data-v-a5bbb52c data-v-30c06bd3><!--[-->English<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--></div><div class="group" data-v-f38c483a><div class="item appearance" data-v-f38c483a><p class="label" data-v-f38c483a>Appearance</p><div class="appearance-action" data-v-f38c483a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-f38c483a data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-f38c483a><div class="item social-links" data-v-f38c483a><div class="VPSocialLinks social-links-list" data-v-f38c483a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/jinleili/learn-wgpu-zh" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-be450ad9 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-93a960b4 data-v-2817d72e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2817d72e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-2817d72e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-2817d72e>Menu</span></button><a class="top-link" href="#" data-v-2817d72e>Return to top</a></div><aside class="VPSidebar" data-v-93a960b4 data-v-c79ccefa><div class="curtain" data-v-c79ccefa></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c79ccefa><span class="visually-hidden" id="sidebar-aria-label" data-v-c79ccefa> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 has-active" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>åŸºç¡€</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial1-window" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ä¾èµ–ä¸çª—å£</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial2-surface/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>å±•ç¤ºå¹³é¢ (Surface)</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial3-pipeline/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ç®¡çº¿ (Pipeline)</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial4-buffer/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ç¼“å†²åŒºä¸ç´¢å¼•</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial5-textures/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>çº¹ç†å’Œç»‘å®šç»„</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial6-uniforms/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Uniform ç¼“å†²åŒºä¸ 3D è™šæ‹Ÿæ‘„åƒæœº</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial7-instancing/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>å®ä¾‹åŒ–ç»˜åˆ¶</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial8-depth/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>æ·±åº¦ç¼“å†²åŒº</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/tutorial9-models/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>æ¨¡å‹åŠ è½½</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/beginner/wgsl" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ğŸ†• WGSL ç€è‰²å™¨è¯­è¨€</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>è¿›é˜¶</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/intermediate/tutorial10-lighting/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>å…‰ç…§</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/intermediate/tutorial11-normals/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>æ³•çº¿æ˜ å°„</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/intermediate/tutorial12-camera/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>æ›´å¥½çš„æ‘„åƒæœº</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/intermediate/compute-pipeline/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ğŸ†• è®¡ç®—ç®¡çº¿</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>é›†æˆä¸è°ƒè¯•</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/integration-and-debugging/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>æ¥”å­</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/integration-and-debugging/ios/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ğŸ†• ä¸ iOS App é›†æˆ</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/integration-and-debugging/android/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ğŸ†• ä¸ Android App é›†æˆ</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/integration-and-debugging/xcode/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ğŸ†• ä½¿ç”¨ Xcode è°ƒè¯• wgpu ç¨‹åº</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/integration-and-debugging/snapdragon-profiler/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ğŸ†• ä½¿ç”¨ Snapdragon Profiler è°ƒè¯•</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/integration-and-debugging/bevy/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ğŸ†• åœ¨ iOS Adroid App ä¸­é›†æˆ Bevy æ¸¸æˆå¼•æ“</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>æ¡ˆä¾‹å±•ç¤º</h2><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/showcase/windowless/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ç¦»å±æ¸²æŸ“</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/showcase/gifs/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ç”Ÿæˆ GIF åŠ¨å›¾</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/showcase/pong/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Pong</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/showcase/compute/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Compute Example: Tangents and Bitangents</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/showcase/alignment" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Memory Layout in WGSL</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/showcase/imgui-demo/" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Basic Imgui Demo</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>é™„å½•</h2><!--]--><!----></a><!----></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/index" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>ä»‹ç»</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/learn-wgpu-zh/GLOSSARY_OF_TERMS" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>æœ¯è¯­ä¸­è‹±å¯¹ç…§è¡¨</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-93a960b4 data-v-0bd490fb><div class="VPDoc has-sidebar has-aside" data-v-0bd490fb data-v-c5936a1e><div class="container" data-v-c5936a1e><div class="aside" data-v-c5936a1e><div class="aside-curtain" data-v-c5936a1e></div><div class="aside-container" data-v-c5936a1e><div class="aside-content" data-v-c5936a1e><div class="VPDocAside" data-v-c5936a1e data-v-cdc66372><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-cdc66372 data-v-5dd9d5f6><div class="content" data-v-5dd9d5f6><div class="outline-marker" data-v-5dd9d5f6></div><div class="outline-title" data-v-5dd9d5f6>æœ¬ç« å†…å®¹</div><nav aria-labelledby="doc-outline-aria-label" data-v-5dd9d5f6><span class="visually-hidden" id="doc-outline-aria-label" data-v-5dd9d5f6> Table of Contents for current page </span><ul class="root" data-v-5dd9d5f6 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cdc66372></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c5936a1e><div class="content-container" data-v-c5936a1e><!--[--><!--]--><main class="main" data-v-c5936a1e><div style="position:relative;" class="vp-doc _learn-wgpu-zh_beginner_tutorial1-window" data-v-c5936a1e><div><h1 id="ä¾èµ–ä¸çª—å£" tabindex="-1">ä¾èµ–ä¸çª—å£ <a class="header-anchor" href="#ä¾èµ–ä¸çª—å£" aria-hidden="true">#</a></h1><p>éƒ¨åˆ†è¯»è€…å¯èƒ½å·²ç»ç†Ÿæ‚‰å¦‚ä½•åœ¨ Rust ä¸­æ‰“å¼€çª—å£ç¨‹åºï¼Œä¸”æœ‰è‡ªå·±åå¥½çš„çª—å£ç®¡ç†åº“ã€‚ä½†æœ¬æ•™ç¨‹æ˜¯ä¸ºæ‰€æœ‰äººè®¾è®¡çš„ï¼Œæ‰€ä»¥ä¸å…è¦æ¶‰åŠè¿™éƒ¨åˆ†çš„å†…å®¹ã€‚æ‰€å¹¸ä½ å¯ä»¥è·³è¿‡è¿™éƒ¨åˆ†ï¼Œä½†æœ‰ä¸€ç‚¹å€¼å¾—äº†è§£ï¼Œå³æ— è®ºä½¿ç”¨ä»€ä¹ˆæ ·çš„çª—å£è§£å†³æ–¹æ¡ˆï¼Œéƒ½éœ€è¦å®ç° <a href="https://github.com/rust-windowing/raw-window-handle" target="_blank" rel="noreferrer">raw-window-handle</a> é‡Œå®šä¹‰çš„ <code>raw_window_handle()</code> åŠ <code>raw_display_handle()</code> ä¸¤ä¸ªæŠ½è±¡æ¥å£ã€‚å¦‚æœæœ‰å…´è¶£è‡ªå·±åŠ¨æ‰‹æ¥ä¸º wgpu å®ç°ä¸€ä¸ªåŸºç¡€çš„çª—å£ï¼Œå¯ä»¥å‚è€ƒ <a href="https://github.com/jinleili/wgpu-in-app" target="_blank" rel="noreferrer">wgpu-in-app</a>ï¼Œ<a href="./../integration-and-debugging/android/">ä¸ Android App é›†æˆ</a>è¿™ä¸€ç« èŠ‚ä¹Ÿæœ‰è¯¦æƒ…çš„ä»‹ç»ã€‚</p><h2 id="æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…" tabindex="-1">æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…? <a class="header-anchor" href="#æˆ‘ä»¬è¦ä½¿ç”¨å“ªäº›åŒ…" aria-hidden="true">#</a></h2><p>æˆ‘ä»¬å°†å°½é‡ä¿æŒåŸºç¡€éƒ¨åˆ†çš„ç®€å•æ€§ã€‚åç»­æˆ‘ä»¬ä¼šé€æ¸æ·»åŠ ä¾èµ–ï¼Œå…ˆåˆ—å‡ºç›¸å…³çš„ <code>Cargo.toml</code> ä¾èµ–é¡¹å¦‚ä¸‹ï¼š</p><div class="language-toml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">dependencies</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">winit </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.27.1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">env_logger </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.9</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">log </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">wgpu </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.14</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="ä½¿ç”¨-rust-çš„æ–°ç‰ˆè§£æå™¨" tabindex="-1">ä½¿ç”¨ Rust çš„æ–°ç‰ˆè§£æå™¨ <a class="header-anchor" href="#ä½¿ç”¨-rust-çš„æ–°ç‰ˆè§£æå™¨" aria-hidden="true">#</a></h2><p>è‡ª 0.10 ç‰ˆæœ¬èµ·ï¼Œwgpu éœ€è¦ä½¿ç”¨ cargo çš„ <a href="https://doc.rust-lang.org/cargo/reference/resolver.html#feature-resolver-version-2" target="_blank" rel="noreferrer">æ–°ç‰ˆç‰¹æ€§è§£æå™¨</a>ï¼Œè¿™åœ¨ Rust çš„ 2021 editionï¼ˆå³ä»»ä½•åŸºäº Rust 1.56.0 æˆ–æ›´æ–°ç‰ˆæœ¬çš„æ–°é¡¹ç›®ï¼‰ä¸­æ˜¯é»˜è®¤å¯ç”¨çš„ã€‚ä½†å¦‚æœä½ ä»åœ¨ä½¿ç”¨ 2018 editionï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨å•<strong>åŒ…</strong>é¡¹ç›® <code>Cargo.toml</code> çš„ <code>[package]</code> é…ç½®ä¸­ï¼Œæˆ–è€…åœ¨<strong>â¼¯ä½œç©ºé—´</strong>çš„æ ¹çº§ <code>Cargo.toml</code> çš„ <code>[workspace]</code> é…ç½®ä¸­æ·»åŠ  <code>resolver = &quot;2&quot;</code> é¡¹ã€‚</p><h2 id="å…³äº-env-logger" tabindex="-1">å…³äº env_logger <a class="header-anchor" href="#å…³äº-env-logger" aria-hidden="true">#</a></h2><p>é€šè¿‡ <code>env_logger::init()</code> æ¥å¯ç”¨æ—¥å¿—æ˜¯éå¸¸é‡è¦çš„ã€‚å½“ wgpu é‡åˆ°å„ç±»é”™è¯¯æ—¶ï¼Œå®ƒéƒ½ä¼šç”¨ä¸€æ¡é€šç”¨æ€§çš„æ¶ˆæ¯æŠ›å‡º panicï¼Œå¹¶é€šè¿‡æ—¥å¿—<strong>åŒ…</strong>æ¥è®°å½•å®é™…çš„é”™è¯¯ä¿¡æ¯ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸æ·»åŠ  <code>env_logger::init()</code>ï¼Œwgpu å°†é™é»˜åœ°é€€å‡ºï¼Œä»è€Œä»¤ä½ éå¸¸å›°æƒ‘ï¼<br> (ä¸‹é¢çš„ä»£ç ä¸­å·²ç»å¯ç”¨)</p><h2 id="åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®" tabindex="-1">åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›® <a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®" aria-hidden="true">#</a></h2><p>è¿è¡Œ <code>cargo new xxx</code>ï¼Œxxx æ˜¯æŒ‡ä½ çš„é¡¹ç›®åç§°ã€‚<br> (ä¸‹é¢çš„ä¾‹å­ä¸­æˆ‘ä½¿ç”¨äº† <code>tutorial1_window</code>)</p><h2 id="ç¤ºä¾‹ä»£ç " tabindex="-1">ç¤ºä¾‹ä»£ç  <a class="header-anchor" href="#ç¤ºä¾‹ä»£ç " aria-hidden="true">#</a></h2><p>è¿™ä¸€éƒ¨åˆ†æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œæ‰€ä»¥ç›´æ¥è´´å‡ºå®Œæ•´çš„ä»£ç ã€‚åªéœ€å°†å…¶ç²˜è´´åˆ°ä½ çš„ <code>main.rs</code> ä¸­å³å¯ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> winit</span><span style="color:#89DDFF;">::{</span></span>
<span class="line"><span style="color:#FFCB6B;">    event</span><span style="color:#89DDFF;">::*,</span></span>
<span class="line"><span style="color:#FFCB6B;">    event_loop</span><span style="color:#89DDFF;">::{</span><span style="color:#FFCB6B;">ControlFlow</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> EventLoop</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#FFCB6B;">    window</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">WindowBuilder</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">pub</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">fn</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">env_logger</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> event_loop </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EventLoop</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> window </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WindowBuilder</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">build</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">event_loop</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">unwrap</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    event_loop</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">move</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> control_flow</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">match</span><span style="color:#A6ACCD;"> event </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">WindowEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">ref</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            window_id</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> window_id </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">id</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">match</span><span style="color:#A6ACCD;"> event </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">WindowEvent</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">CloseRequested</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WindowEvent</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">KeyboardInput</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                input</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">KeyboardInput</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        state</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ElementState</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Pressed</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                        virtual_keycode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Some</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">VirtualKeyCode</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Escape</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">..</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">..</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">control_flow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ControlFlow</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Exit</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            _ </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        _ </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>ä¸Šè¿°ä»£ç æ‰€åšçš„å…¨éƒ¨å·¥ä½œå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªçª—å£ï¼Œå¹¶åœ¨ç”¨æˆ·å…³é—­æˆ–æŒ‰ä¸‹ escape é”®å‰ä½¿å…¶ä¿æŒæ‰“å¼€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<strong>å…¥å£å‡½æ•°</strong>ä¸­è¿è¡Œè¿™äº›ä»£ç ã€‚å¾ˆç®€å•ï¼Œåªéœ€åœ¨ <code>main()</code> å‡½æ•°ä¸­è°ƒç”¨ <code>run()</code>ï¼Œç„¶åè¿è¡Œ!</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">fn</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>(å…¶ä¸­ <code>tutorial1_window</code> æ˜¯ä½ ä¹‹å‰ç”¨ cargo åˆ›å»ºçš„é¡¹ç›®çš„åç§°)</p><p>å½“ä½ åªæ‰“ç®—æ”¯æŒæ¡Œé¢ç¯å¢ƒæ—¶ï¼Œä¸Šè¾¹è¿™äº›å°±æ˜¯å…¨éƒ¨æ‰€è¦åšçš„ï¼åœ¨ä¸‹ä¸€ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†çœŸæ­£å¼€å§‹ä½¿ç”¨ wgpuï¼</p><h2 id="æ·»åŠ å¯¹-web-çš„æ”¯æŒ" tabindex="-1">æ·»åŠ å¯¹ web çš„æ”¯æŒ <a class="header-anchor" href="#æ·»åŠ å¯¹-web-çš„æ”¯æŒ" aria-hidden="true">#</a></h2><p>å¦‚æœè®²å®Œäº†è¿™ä¸ªå…³äº WebGPU çš„æ•™ç¨‹ï¼Œå´ä¸æå¦‚ä½•åœ¨ web ä¸Šä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªæ•™ç¨‹å°±æ˜¯ä¸å®Œæ•´çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œè®©ä¸€ä¸ª wgpu ç¨‹åºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¹¶ä¸éš¾ã€‚</p><p>è®©æˆ‘ä»¬ä»ä¿®æ”¹ <code>Cargo.toml</code> å¼€å§‹ï¼š</p><div class="language-toml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">lib</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">crate-type </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cdylib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rlib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿™å‡ è¡Œå‘Šè¯‰ cargo å…è®¸é¡¹ç›®<strong>æ„å»º</strong>ï¼ˆbuild)ä¸€ä¸ªæœ¬åœ°çš„ Rust é™æ€åº“ï¼ˆrlibï¼‰å’Œä¸€ä¸ª C/C++ å…¼å®¹åº“ï¼ˆcdylibï¼‰ã€‚ æˆ‘ä»¬éœ€è¦ rlib æ¥åœ¨æ¡Œé¢ç¯å¢ƒä¸­è¿è¡Œ wgpuï¼Œéœ€è¦ cdylib æ¥æ„å»ºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ Web Assemblyã€‚</p><div class="note"><p>ä»…åœ¨éœ€è¦å°†é¡¹ç›®åšä¸ºå…¶ä»– Rust é¡¹ç›®çš„<strong>åŒ…</strong>ï¼ˆcrateï¼‰æä¾›æ—¶ï¼Œ<code>[lib]</code> é¡¹çš„é…ç½®æ‰æ˜¯å¿…é¡»çš„ã€‚æ‰€ä»¥æˆ‘ä»¬çš„ç¤ºä¾‹ç¨‹åºå¯ä»¥çœç•¥ä¸Šé¢è¿™ä¸€æ­¥ã€‚</p></div><div class="note"><h2 id="web-assembly" tabindex="-1">Web Assembly <a class="header-anchor" href="#web-assembly" aria-hidden="true">#</a></h2><p>Web Assembly å³ WASMï¼Œæ˜¯å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨æ”¯æŒçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ƒä»¤ Rust ç­‰åº•å±‚è¯­è¨€èƒ½åœ¨ç½‘é¡µä¸Šè¿è¡Œã€‚è¿™å…è®¸æˆ‘ä»¬ç”¨ Rust ç¼–å†™åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨å‡ è¡Œ Javascript æ¥åŠ è½½å®ƒåˆ° Web æµè§ˆå™¨ä¸­è¿è¡Œã€‚</p></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä»…éœ€æ·»åŠ ä¸€äº›ä¸“é—¨ç”¨äºåœ¨ WASM ä¸­è¿è¡Œçš„ä¾èµ–é¡¹ï¼š</p><div class="language-toml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">dependencies</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">cfg-if </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å…¶ä»–å¸¸è§„ä¾èµ–...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">target</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">&#39;cfg(target_arch</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">&quot;wasm32&quot;)&#39;</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">dependencies</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">console_error_panic_hook </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.1.6</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">console_log </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.2.0</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">wasm-bindgen </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.2.83</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">wasm-bindgen-futures </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.4.30</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">web-sys </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> version </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.3.60</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> features </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Document</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Window</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Element</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">]}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><a href="https://docs.rs/cfg-if" target="_blank" rel="noreferrer">cfg-if</a>æä¾›äº†ä¸€ä¸ªå®ï¼Œä½¿å¾—æ›´åŠ å®¹æ˜“ç®¡ç†ç‰¹å®šå¹³å°çš„ä»£ç ã€‚</p><p><code>[target.&#39;cfg(target_arch = &quot;wasm32&quot;)&#39;.dependencies]</code> è¡Œå‘Šè¯‰ cargoï¼Œå¦‚æœæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ wasm32 æ¶æ„ï¼Œåˆ™åªåŒ…æ‹¬è¿™äº›ä¾èµ–é¡¹ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªä¾èµ–é¡¹åªæ˜¯è®©æˆ‘ä»¬ä¸ javascript çš„äº¤äº’æ›´å®¹æ˜“ã€‚</p><ul><li><a href="https://docs.rs/console_error_panic_hook" target="_blank" rel="noreferrer">console_error_panic_hook</a> é…ç½® <code>panic!</code> å®ä»¥å°†é”™è¯¯å‘é€åˆ° javascript æ§åˆ¶å°ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªï¼Œå½“é‡åˆ°ç¨‹åºå´©æºƒæ—¶ï¼Œä½ å°±ä¼šå¯¹å¯¼è‡´å´©æºƒçš„åŸå› ä¸€æ— æ‰€çŸ¥ã€‚</li><li><a href="https://docs.rs/console_log" target="_blank" rel="noreferrer">console_log</a> å®ç°äº† <a href="https://docs.rs/log" target="_blank" rel="noreferrer">log</a> APIã€‚å®ƒå°†æ‰€æœ‰æ—¥å¿—å‘é€åˆ° javascript æ§åˆ¶å°ã€‚å®ƒè¿˜å¯ä»¥é…ç½®ä¸ºä»…å‘é€ç‰¹å®šçº§åˆ«çš„æ—¥å¿—ï¼Œè¿™éå¸¸é€‚åˆç”¨äºè°ƒè¯•ã€‚</li><li>å½“æˆ‘ä»¬æƒ³åœ¨å¤§å¤šæ•°å½“å‰æµè§ˆå™¨ä¸Šè¿è¡Œæ—¶ï¼Œå°±éœ€è¦åœ¨ wgpu ä¸Šå¯ç”¨ <code>WebGL</code> åŠŸèƒ½ã€‚å› ä¸ºç›®å‰åªåœ¨ Firefox Nightly å’Œ Chrome Canary ç­‰æµè§ˆå™¨çš„å®éªŒç‰ˆæœ¬ä¸Šæ‰æ”¯æŒç›´æ¥ä½¿ç”¨ WebGPU APIã€‚<br> æ¬¢è¿ä½ åœ¨è¿™äº›æµè§ˆå™¨ä¸Šæµ‹è¯•è¿™æ®µä»£ç ï¼ˆwgpu çš„å¼€å‘è€…ä¹Ÿä¼šå¾ˆæ„Ÿæ¿€ï¼‰ï¼Œä½†ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘æ‰“ç®—åšæŒä½¿ç”¨ WebGL åŠŸèƒ½ï¼Œç›´åˆ° WebGPU API è¾¾åˆ°ä¸€ä¸ªæ›´ç¨³å®šçš„çŠ¶æ€ã€‚<br> å¦‚æœä½ æƒ³äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="https://github.com/gfx-rs/wgpu/wiki/Running-on-the-Web-with-WebGPU-and-WebGL" target="_blank" rel="noreferrer">wgpu æºç ä»“åº“</a> ä¸Šçš„ web ç¼–è¯‘æŒ‡å—</li><li><a href="https://docs.rs/wasm-bindgen" target="_blank" rel="noreferrer">wasm-bindgen</a> æ˜¯æ­¤åˆ—è¡¨ä¸­æœ€é‡è¦çš„ä¾èµ–é¡¹ã€‚å®ƒè´Ÿè´£ç”Ÿæˆæ ·æ¿ä»£ç ï¼Œå¹¶å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„é¡¹ç›®ã€‚å®ƒè¿˜å…è®¸æˆ‘ä»¬åœ¨ Rust ä¸­å…¬å¼€å¯åœ¨ Javascript ä¸­ä½¿ç”¨çš„<strong>å‡½æ•°</strong>ï¼Œåä¹‹äº¦ç„¶ã€‚<br> æˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç» wasm-bindgenï¼Œæ‰€ä»¥å¦‚æœä½ éœ€è¦å…¥é—¨ï¼ˆæˆ–è€…æ˜¯å¤ä¹ ï¼‰ï¼Œè¯·æŸ¥çœ‹<a href="https://rustwasm.github.io/wasm-bindgen/" target="_blank" rel="noreferrer">è¿™é‡Œ</a></li><li><a href="https://docs.rs/web-sys" target="_blank" rel="noreferrer">web-sys</a> æ˜¯ä¸€ä¸ªåŒ…å«äº†è®¸å¤šåœ¨ javascript ç¨‹åºä¸­å¯ç”¨çš„<strong>å‡½æ•°</strong>å’Œ<strong>ç»“æ„ä½“</strong>çš„å·¥å…·ç®±ï¼Œå¦‚ï¼š<code>get_element_by_id</code>ã€<code>append_child</code>ã€‚<code>features = [...]</code> æ•°ç»„é‡Œåˆ—å‡ºçš„æ˜¯æˆ‘ä»¬ç›®å‰æœ€ä½é™åº¦éœ€è¦çš„åŠŸèƒ½ã€‚</li></ul><h2 id="æ›´å¤šç¤ºä¾‹ä»£ç " tabindex="-1">æ›´å¤šç¤ºä¾‹ä»£ç  <a class="header-anchor" href="#æ›´å¤šç¤ºä¾‹ä»£ç " aria-hidden="true">#</a></h2><p>é¦–å…ˆ, æˆ‘ä»¬éœ€è¦åœ¨ <code>main.rs</code> å†…å¼•å…¥ <code>wasm-bindgen</code> :</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">#[</span><span style="color:#A6ACCD;">cfg</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">target_arch</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wasm32</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)]</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> wasm_bindgen</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">prelude</span><span style="color:#89DDFF;">::*;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ¥ä¸‹æ¥ï¼Œéœ€è¦å‘Šè¯‰ wasm-bindgen åœ¨ WASM è¢«åŠ è½½åæ‰§è¡Œæˆ‘ä»¬çš„ <code>run()</code> å‡½æ•°ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">#[</span><span style="color:#A6ACCD;">cfg_attr</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">target_arch</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wasm32</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> wasm_bindgen</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">start</span><span style="color:#89DDFF;">))]</span></span>
<span class="line"><span style="color:#F78C6C;">pub</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">fn</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // çœç•¥çš„ä»£ç ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç„¶åéœ€è¦æ ¹æ®æ˜¯å¦åœ¨ WASM ç¯å¢ƒæ¥åˆ‡æ¢æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„æ—¥å¿—<strong>åŒ…</strong>ã€‚åœ¨ <code>run()</code> å‡½æ•°å†…æ·»åŠ ä»¥ä¸‹ä»£ç æ›¿æ¢ <code>env_logger::init()</code> è¡Œã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cfg_if</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">cfg_if!</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#[</span><span style="color:#A6ACCD;">cfg</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">target_arch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wasm32</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">std</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">panic</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">set_hook</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Box</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">console_error_panic_hook</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">hook</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">console_log</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">init_with_level</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">log</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Level</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Warn</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">expect</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æ— æ³•åˆå§‹åŒ–æ—¥å¿—åº“</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">env_logger</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸Šè¾¹çš„ä»£ç åˆ¤æ–­äº†<strong>æ„å»º</strong>ç›®æ ‡ï¼Œåœ¨ web æ„å»ºä¸­è®¾ç½® <code>console_log</code> å’Œ <code>console_error_panic_hook</code>ã€‚è¿™å¾ˆé‡è¦ï¼Œå› ä¸º <code>env_logger</code> ç›®å‰ä¸æ”¯æŒ Web Assemblyã€‚</p><div class="note"><h3 id="å¦ä¸€ç§å®ç°" tabindex="-1">å¦ä¸€ç§å®ç° <a class="header-anchor" href="#å¦ä¸€ç§å®ç°" aria-hidden="true">#</a></h3><p>åœ¨ç¬¬ 3~8 ç« ï¼Œ<code>run()</code> å‡½æ•°åŠéå† event_loop çš„ä»£ç è¢«ç»Ÿä¸€å°è£…åˆ°äº† <code>framework.rs</code> ä¸­, è¿˜å®šä¹‰äº† <code>Action</code> trait æ¥æŠ½è±¡æ¯ä¸€ç« ä¸­ä¸åŒçš„ <code>State</code> ã€‚ ç„¶åé€šè¿‡è°ƒç”¨ wasm_bindgen_futures åŒ…çš„ <code>spawn_local</code> å‡½æ•°æ¥åˆ›å»º <code>State</code> å®ä¾‹å¹¶å¤„ç† JS å¼‚å¸¸ã€‚</p><p>ç¬¬ 1ï½2 ç« çš„ä»£ç é€šè¿‡ <code>cargo run-wasm --bin xxx</code> è¿è¡Œæ—¶ï¼Œåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­ä¼šçœ‹åˆ°çš„ <code>...Using exceptions for control flow, don&#39;t mind me. This isn&#39;t actually an error!</code> é”™è¯¯ç°åœ¨è¢«æ¶ˆé™¤äº†ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">#[</span><span style="color:#A6ACCD;">cfg</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">target_arch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wasm32</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)]</span></span>
<span class="line"><span style="color:#F78C6C;">pub</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">fn</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">A</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Action</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#FFCB6B;">static</span><span style="color:#89DDFF;">&gt;()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">wasm_bindgen_futures</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">spawn_local</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">move</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event_loop</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> instance</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">create_action_instance</span><span style="color:#89DDFF;">::&lt;</span><span style="color:#FFCB6B;">A</span><span style="color:#89DDFF;">&gt;().</span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> run_closure </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Closure</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">once_into_js</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">move</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">start_event_loop</span><span style="color:#89DDFF;">::&lt;</span><span style="color:#FFCB6B;">A</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">event_loop</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> instance</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        // å¤„ç†è¿è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºçš„ JS å¼‚å¸¸ã€‚</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        // å¦åˆ™ wasm_bindgen_futures é˜Ÿåˆ—å°†ä¸­æ–­ï¼Œä¸”ä¸å†å¤„ç†ä»»ä½•ä»»åŠ¡ã€‚</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Err</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">call_catch</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">run_closure</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            // ...</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div><p>æ¥ä¸‹æ¥ï¼Œåœ¨åˆ›å»ºäº†äº‹ä»¶å¾ªç¯ä¸çª—å£ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨åº”ç”¨ç¨‹åºæ‰€åœ¨çš„ HTML ç½‘é¡µä¸­æ·»åŠ ä¸€ä¸ª<strong>ç”»å¸ƒ</strong>ï¼ˆcanvas)ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">#[</span><span style="color:#A6ACCD;">cfg</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">target_arch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wasm32</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)]</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // Winit ä¸å…è®¸ç”¨ CSS è°ƒæ•´å¤§å°ï¼Œæ‰€ä»¥åœ¨ web ç¯å¢ƒé‡Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨è®¾ç½®å¤§å°ã€‚</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> winit</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">dpi</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">PhysicalSize</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set_inner_size</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">PhysicalSize</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">450</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">400</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> winit</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">platform</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">web</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">WindowExtWebSys</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">web_sys</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">window</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">and_then</span><span style="color:#89DDFF;">(|</span><span style="color:#A6ACCD;">win</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> win</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">document</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">and_then</span><span style="color:#89DDFF;">(|</span><span style="color:#A6ACCD;">doc</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> dst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> doc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_element_by_id</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wasm-example</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)?;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> canvas </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">web_sys</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Element</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">from</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">canvas</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">            dst</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append_child</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">canvas</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">ok</span><span style="color:#89DDFF;">()?;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">Some</span><span style="color:#89DDFF;">(())</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">expect</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æ— æ³•å°†ç”»å¸ƒæ·»åŠ åˆ°ç½‘é¡µä¸Š</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="note"><p><code>&quot;wasm-example&quot;</code> è¿™ä¸ª ID æ˜¯é’ˆå¯¹æˆ‘çš„é¡¹ç›®ï¼ˆä¹Ÿå°±æ˜¯æœ¬æ•™ç¨‹ï¼‰çš„ã€‚ä½ å¯ä»¥ä½ åœ¨ HTML ä¸­ä½¿ç”¨ä»»ä½• ID æ¥ä»£æ›¿ï¼Œæˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å°†ç”»å¸ƒæ·»åŠ åˆ° <code>&lt;body&gt;</code> ä¸­ï¼Œå°±åƒ wgpu æºç ä»“åº“ä¸­æ‰€åšçš„é‚£æ ·ï¼Œè¿™éƒ¨åˆ†æœ€ç»ˆç”±ä½ å†³å®šã€‚</p></div><p>ä¸Šè¾¹è¿™äº›å°±æ˜¯æˆ‘ä»¬ç°åœ¨éœ€è¦çš„æ‰€æœ‰ web ä¸“ç”¨ä»£ç ã€‚æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯<strong>æ„å»º</strong> Web Assembly æœ¬èº«ã€‚</p><h2 id="wasm-pack" tabindex="-1">Wasm Pack <a class="header-anchor" href="#wasm-pack" aria-hidden="true">#</a></h2><p>ä½ å¯ä»¥åªç”¨ wasm-bindgen æ¥<strong>æ„å»º</strong>ä¸€ä¸ª wgpu åº”ç”¨ç¨‹åºï¼Œä½†æˆ‘åœ¨è¿™æ ·åšçš„æ—¶å€™é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£… wasm-bindgenï¼Œå¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªä¾èµ–é¡¹ã€‚ä½œä¸ºä¾èµ–å…³ç³»çš„ç‰ˆæœ¬<strong>éœ€è¦</strong>ä¸ä½ å®‰è£…çš„ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ï¼Œå¦åˆ™æ„å»ºå°†ä¼šå¤±è´¥ã€‚</p><p>ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œå¹¶ä½¿é˜…è¯»è¿™ç¯‡æ•™ç¨‹äººæ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œæˆ‘é€‰æ‹©åœ¨ç»„åˆä¸­åŠ å…¥ <a href="https://rustwasm.github.io/docs/wasm-pack/" target="_blank" rel="noreferrer">wasm-pack</a>ã€‚wasm-pack å¯ä»¥ä¸ºä½ å®‰è£…æ­£ç¡®çš„ wasm-bindgen ç‰ˆæœ¬ï¼Œè€Œä¸”å®ƒè¿˜æ”¯æŒä¸ºä¸åŒç±»å‹çš„ web ç›®æ ‡è¿›è¡Œ<strong>æ„å»º</strong>ï¼šæµè§ˆå™¨ã€NodeJS å’Œ webpack ç­‰æ‰“åŒ…å·¥å…·ã€‚</p><p>ä½¿ç”¨ wasm-pack å‰ï¼Œä½ éœ€è¦å…ˆ<a href="https://rustwasm.github.io/wasm-pack/installer/" target="_blank" rel="noreferrer">å®‰è£…</a>ã€‚</p><p>å®Œæˆå®‰è£…åï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥<strong>æ„å»º</strong>æˆ‘ä»¬çš„é¡¹ç›®äº†ã€‚å½“ä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„<strong>åŒ…</strong>ï¼ˆcrateï¼‰æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>wasm-pack build</code>ã€‚å¦‚æœæ˜¯<strong>å·¥ä½œåŒº</strong>ï¼ˆworkspaceï¼‰ï¼Œå°±å¿…é¡»æŒ‡å®šä½ è¦æ„å»ºçš„åŒ…ã€‚æƒ³è±¡ä¸€ä¸‹<strong>åŒ…</strong>æ˜¯ä¸€ä¸ªåä¸º <code>game</code> çš„ç›®å½•ï¼Œä½ å°±ä¼šä½¿ç”¨ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">wasm-pack</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">game</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¸€æ—¦ wasm-pack å®Œæˆ<strong>æ„å»º</strong>ï¼Œåœ¨ä½ çš„<strong>åŒ…</strong>ç›®å½•ä¸‹å°±ä¼šæœ‰ä¸€ä¸ª <code>pkg</code> ç›®å½•ï¼Œè¿è¡Œ WASM ä»£ç æ‰€éœ€çš„æ‰€æœ‰ javascript ä»£ç éƒ½åœ¨è¿™é‡Œã€‚ç„¶ååœ¨ javascript ä¸­å¯¼å…¥ WASM æ¨¡å—ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> init </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./pkg/game.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">init</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">WASM Loaded</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿™ä¸ªç½‘ç«™ä½¿ç”¨äº† <a href="https://vitepress.vuejs.org" target="_blank" rel="noreferrer">VitePress</a>ï¼Œå¹¶ä¸”æ˜¯åœ¨ Vue ç»„ä»¶ä¸­åŠ è½½ WASMã€‚å¦‚æœæƒ³çœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆåšçš„ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://github.com/sotrh/learn-wgpu/blob/master/docs/.vitepress/components/WasmExample.vue" target="_blank" rel="noreferrer">è¿™é‡Œ</a>ã€‚</p><div class="note"><p>å¦‚æœæ‰“ç®—åœ¨ä¸€ä¸ªæ™®é€šçš„ HTML ç½‘ç«™ä¸­ä½¿ç”¨ä½ çš„ WASM æ¨¡å—ï¼Œåªéœ€å‘Šè¯‰ wasm-pack ä»¥ web ä¸ºæ„å»ºç›®æ ‡ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">wasm-pack</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--target</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åå°±å¯ä»¥åœ¨ä¸€ä¸ª ES6 æ¨¡å—ä¸­è¿è¡Œ WASM ä»£ç :</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">X-UA-Compatible</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IE=edge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Pong with WASM</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> init </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./pkg/pong.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">init</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">WASM Loaded</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  &lt;</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">canvas</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#B2CCD6;">background-color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> black</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></div><p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æŸ¥çœ‹ç¤ºä¾‹ä»£ç è¿è¡Œ!</p><div id="wasm-example"><!----><!----><button>ç‚¹å‡»è¿è¡Œ Tutorial1_window</button></div><div class="auto-github-link"><a href="https://github.com/jinleili/learn-wgpu-zh/tree/master/code/beginner/tutorial1-window" target="_blank" rel="noopener noreferrer"> æŸ¥çœ‹æºç ï¼ </a></div></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-c5936a1e data-v-e033cd21><div class="edit-info" data-v-e033cd21><!----><div class="last-updated" data-v-e033cd21><p class="VPLastUpdated" data-v-e033cd21 data-v-355aa5ef>ä¸Šæ¬¡æ›´æ–°: <time datetime="2023-02-04T07:00:02.000Z" data-v-355aa5ef></time></p></div></div><div class="prev-next" data-v-e033cd21><div class="pager" data-v-e033cd21><!----></div><div class="pager" data-v-e033cd21><a class="pager-link next" href="/learn-wgpu-zh/beginner/tutorial2-surface/" data-v-e033cd21><span class="desc" data-v-e033cd21>ä¸‹ä¸€ç« </span><span class="title" data-v-e033cd21>å±•ç¤ºå¹³é¢ (Surface)</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"beginner_wgsl.md\":\"a721834b\",\"en_index.md\":\"84b4e915\",\"index.md\":\"9152dbdc\",\"integration-and-debugging_android_index.md\":\"abfd005c\",\"integration-and-debugging_bevy_index.md\":\"f269f28d\",\"integration-and-debugging_index.md\":\"30360508\",\"integration-and-debugging_ios_index.md\":\"196882ab\",\"integration-and-debugging_snapdragon-profiler_index.md\":\"d1c3218f\",\"integration-and-debugging_xcode_index.md\":\"96ffbb59\",\"intermediate_pbr-notes.md\":\"68933957\",\"beginner_tutorial2-surface_index.md\":\"945dd0cf\",\"intermediate_compute-pipeline_index.md\":\"42166c72\",\"glossary_of_terms.md\":\"9d17c19b\",\"beginner_tutorial1-window.md\":\"3e3b70ac\",\"beginner_tutorial3-pipeline_index.md\":\"a19eb737\",\"intermediate_tutorial10-lighting_index.md\":\"07a2204a\",\"beginner_tutorial4-buffer_index.md\":\"11e6abbf\",\"beginner_tutorial5-textures_index.md\":\"2324b777\",\"beginner_tutorial6-uniforms_index.md\":\"61fa7ffa\",\"beginner_tutorial7-instancing_index.md\":\"00553dce\",\"beginner_tutorial8-depth_index.md\":\"d5eabe1f\",\"intermediate_tutorial13-terrain_index.md\":\"11ddbdac\",\"intermediate_tutorial11-normals_index.md\":\"49faaa55\",\"showcase_alignment.md\":\"f36ad892\",\"showcase_compute_index.md\":\"9e39d90d\",\"showcase_gifs_index.md\":\"c800924f\",\"showcase_imgui-demo_index.md\":\"50524489\",\"showcase_pong_index.md\":\"dcb45a39\",\"showcase_threading.md\":\"e9ddca55\",\"showcase_windowless_index.md\":\"4e1b5c8a\",\"beginner_tutorial9-models_index.md\":\"e128e89f\",\"intermediate_tutorial12-camera_index.md\":\"52ead6c2\"}")</script>
    <script type="module" async src="/learn-wgpu-zh/assets/app.71ba3d0d.js"></script>
    
  </body>
</html>