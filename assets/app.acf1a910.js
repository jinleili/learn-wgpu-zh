import{d as _,u as g,g as w,o as i,c as o,k as l,_ as u,a2 as p,t as h,e as c,U as x,a as y,V as m,a3 as E,a4 as b,a5 as A,a6 as $,a7 as C,a8 as z,a9 as S,aa as P,ab as W,ac as L,j as T,A as k,ad as G,ae as I,af as U,ag as N}from"./chunks/framework.7354d9ef.js";import{t as R}from"./chunks/theme.72e6cdd7.js";const F={class:"auto-github-link"},j=["href"],B="https://github.com/jinleili/learn-wgpu-zh/tree/master/code/",O=_({__name:"AutoGithubLink",setup(e){const{page:t}=g(),a=w(()=>B+t.value.relativePath.replace("index.md","").replace(".md",""));return(n,s)=>(i(),o("div",F,[l("a",{href:a.value,target:"_blank",rel:"noopener noreferrer"}," 查看源码！ ",8,j)]))}});const V="/learn-wgpu-zh/res/wx.jpg",D={name:"JoinWeiChatGroup"},M={src:V,style:{width:"312px","margin-top":"24px"}};function H(e,t,a,n,s,r){return i(),o("img",M)}const J=u(D,[["render",H]]);function q(e){return e.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}const K={name:"WasmExample",props:{example:"",autoLoad:!1},data(){return{error:"",loading:!1,exampleStarted:!1}},computed:{exampleName(){return q(this.example)}},methods:{async loadExample(){this.loading=!0,this.exampleStarted=!0;try{(await p(()=>import(`./wasm/${this.example}.js`.replace("_","-")),[])).default().then(t=>{this.loading=!1,this.exampleStarted=!0},t=>{`${t}`.includes("don't mind me. This isn't actually an error!")?(this.exampleStarted=!0,this.loading=!1):this.showErr(t)})}catch(e){this.showErr(e)}},showErr(e){this.error=`An error occurred loading "${this.example}": ${e}`,console.error(e),this.exampleStarted=!1,this.loading=!1}},async mounted(){await this.$nextTick(),this.autoLoad&&await this.loadExample()}},Q={id:"wasm-example"},X={key:0,class:"error"},Y={key:1,class:"loading"},Z=["disabled"];function ee(e,t,a,n,s,r){return i(),o("div",Q,[s.error?(i(),o("div",X,h(s.error),1)):c("",!0),s.loading?(i(),o("div",Y," 正在加载 WASM 模块 ... ")):c("",!0),s.exampleStarted?c("",!0):(i(),o("button",{key:2,onClick:t[0]||(t[0]=v=>r.loadExample()),disabled:s.loading},"点击运行 "+h(r.exampleName),9,Z))])}const te=u(K,[["render",ee]]);const ae={name:"WasmFullScreen",props:{wasmName:""},data(){return{timeOutFunctionId:0,missedResizeCount:0,can_resize_canvas:!0}},methods:{canvas_resize_completed(){this.can_resize_canvas=!0},dispatch_resize_event(){this.can_resize_canvas=!1;let e=document.getElementById("simuverse_container");e!=null&&e.dispatchEvent(new Event("canvas_size_need_change"))},window_resized(){let e=document.getElementsByClassName("VPLocalNav");var t=64;e[0]&&(t+=e[0].clientHeight);let a=document.getElementById("simuverse_container");a.style.top=t+"px",clearTimeout(this.timeOutFunctionId),this.can_resize_canvas||this.missedResizeCount>10?(this.missedResizeCount=0,this.timeOutFunctionId=setTimeout(this.dispatch_resize_event,100)):(this.missedResizeCount++,this.timeOutFunctionId=setTimeout(this.window_resized,100))},showAlert(){this.hideLoading();let e=document.getElementById("alert");e!=null&&(e.style.display="block")},hideLoading(){let e=document.getElementById("loading");e!=null&&(e.style.display="none")},async loadSimuverse(){p(()=>import(`https://jinleili.github.io/simuverse/${this.wasmName}.js`),[]).then(e=>{this.hideLoading(),e.default()}).catch(e=>{})}},async mounted(){window.onresize=this.window_resized,window.dispatch_resize_event=this.dispatch_resize_event,window.canvas_resize_completed=this.canvas_resize_completed,"navigator"in window&&"gpu"in navigator?navigator.gpu.requestAdapter().then(e=>{this.loadSimuverse()}).catch(e=>{this.showAlert()}):this.showAlert()},beforeDestroy(){delete window.onresize,delete window.dispatch_resize_event,delete window.canvas_resize_completed}},se={id:"simuverse_container"},ne=x('<div id="alert" style="display:none;"><div style="line-height:40px;">此浏览器版本不支持 WebGPU</div><div style="font-size:16px;color:#999999;">请使用 Chrome/Microsoft Edge 113 及以上版本，或者 Chrome/Edge Canary 并 <span><a href="https://jinleili.github.io/learn-wgpu-zh/#如何开启浏览器-webgpu-试验功能" class="a">开启 WebGPU 实验功能</a></span></div></div><div id="loading" style="display:block;"><div style="line-height:40px;"> WASM 加载中...</div></div>',2),ie=[ne];function oe(e,t,a,n,s,r){return i(),o("div",se,ie)}const re=u(ae,[["render",oe]]);function le(e){return e.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}const de={name:"WebGPUExample",props:{example:"",autoLoad:!0},data(){return{error:"",loading:!1,exampleStarted:!1}},computed:{exampleName(){return le(this.example)}},methods:{showAlert(){this.hideLoading();let e=document.getElementById("alert");e!=null&&(e.style.display="block")},hideLoading(){let e=document.getElementById("loading");e!=null&&(e.style.display="none")},detectWebGPUThenLoad(){"navigator"in window&&"gpu"in navigator?navigator.gpu.requestAdapter().then(e=>{this.loadExample()}).catch(e=>{this.showAlert()}):this.showAlert()},async loadExample(){this.loading=!0,this.exampleStarted=!0;try{(await p(()=>import(`./wasm/${this.example}.js`.replace("_","-")),[])).default().then(t=>{this.loading=!1,this.exampleStarted=!0},t=>{`${t}`.includes("don't mind me. This isn't actually an error!")?(this.exampleStarted=!0,this.loading=!1):this.showErr(t)})}catch(e){this.showErr(e)}},showErr(e){this.error=`An error occurred loading "${this.example}": ${e}`,console.error(e),this.exampleStarted=!1,this.loading=!1,this.showAlert()}},async mounted(){this.autoLoad&&this.detectWebGPUThenLoad()}},ce={id:"wasm-example"},ue=l("div",{id:"alert",style:{display:"none",color:"#353535","margin-top":"20px"}},[l("div",{style:{"line-height":"40px"}},"此浏览器版本不支持 WebGPU"),l("div",{style:{"font-size":"16px",color:"#999999"}},[y("请使用 Chrome/Microsoft Edge 113 及以上版本，或者 Chrome/Edge Canary, FireFox Nightly 并 "),l("span",null,[l("a",{href:"https://jinleili.github.io/learn-wgpu-zh/#如何开启浏览器-webgpu-试验功能",class:"a"},"开启 WebGPU 实验功能")])])],-1),pe={key:0,class:"loading"},he=["disabled"];function me(e,t,a,n,s,r){return i(),o("div",ce,[ue,s.loading?(i(),o("div",pe," 正在加载 WASM 模块 ... ")):c("",!0),s.exampleStarted?c("",!0):(i(),o("button",{key:1,onClick:t[0]||(t[0]=v=>r.detectWebGPUThenLoad()),disabled:s.loading},"点击运行 "+h(r.exampleName),9,he))])}const _e=u(de,[["render",me]]),ge={...R,enhanceApp({app:e}){e.component("AutoGithubLink",O),e.component("JoinWeiChatGroup",J),e.component("WasmExample",te),e.component("WebGPUExample",_e),e.component("WasmFullScreen",re)}};function f(e){if(e.extends){const t=f(e.extends);return{...t,...e,async enhanceApp(a){t.enhanceApp&&await t.enhanceApp(a),e.enhanceApp&&await e.enhanceApp(a)}}}return e}const d=f(ge),fe=_({name:"VitePressApp",setup(){const{site:e}=g();return T(()=>{k(()=>{document.documentElement.lang=e.value.lang,document.documentElement.dir=e.value.dir})}),G(),I(),U(),d.setup&&d.setup(),()=>N(d.Layout)}});async function ve(){const e=xe(),t=we();t.provide(b,e);const a=A(e.route);return t.provide($,a),t.component("Content",C),t.component("ClientOnly",z),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),d.enhanceApp&&await d.enhanceApp({app:t,router:e,siteData:S}),{app:t,router:e,data:a}}function we(){return P(fe)}function xe(){let e=m,t;return W(a=>{let n=L(a);return n?(e&&(t=n),(e||t===n)&&(n=n.replace(/\.js$/,".lean.js")),m&&(e=!1),p(()=>import(n),[])):null},d.NotFound)}m&&ve().then(({app:e,router:t,data:a})=>{t.go().then(()=>{E(t.route,a.site),e.mount("#app")})});export{ve as createApp};
