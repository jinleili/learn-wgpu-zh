import{d as _,u as f,l as y,o as s,c as r,z as l,_ as m,a2 as h,t as c,C as p,a as w,K as u,a3 as v,a4 as E,a5 as b,a6 as A,a7 as $,a8 as C,a9 as P,aa as S,ab as L,ac as W,p as k,k as G,ad as T,ae as U,af as R,ag as N}from"./chunks/framework.6aa29203.js";import{t as j}from"./chunks/theme.a3a551fd.js";const D={class:"auto-github-link"},V=["href"],B="https://github.com/jinleili/learn-wgpu-zh/tree/master/code/",I=_({__name:"AutoGithubLink",setup(e){const{page:t}=f(),a=y(()=>B+t.value.relativePath.replace("index.md","").replace(".md",""));return(o,n)=>(s(),r("div",D,[l("a",{href:a.value,target:"_blank",rel:"noopener noreferrer"}," 查看源码！ ",8,V)]))}});const O="/learn-wgpu-zh/res/wx.jpg",F={name:"JoinWeiChatGroup"},z={src:O,style:{width:"312px","margin-top":"24px"}};function M(e,t,a,o,n,i){return s(),r("img",z)}const J=m(F,[["render",M]]);function H(e){return e.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}const q={name:"WasmExample",props:{example:"",autoLoad:!1},data(){return{error:"",loading:!1,exampleStarted:!1}},computed:{exampleName(){return H(this.example)}},methods:{async loadExample(){this.loading=!0,this.exampleStarted=!0;try{(await h(()=>import(`./wasm/${this.example}.js`.replace("_","-")),[])).default().then(t=>{this.loading=!1,this.exampleStarted=!0},t=>{`${t}`.includes("don't mind me. This isn't actually an error!")?(this.exampleStarted=!0,this.loading=!1):this.showErr(t)})}catch(e){this.showErr(e)}},showErr(e){this.error=`An error occurred loading "${this.example}": ${e}`,console.error(e),this.exampleStarted=!1,this.loading=!1}},async mounted(){await this.$nextTick(),this.autoLoad&&await this.loadExample()}},K={id:"wasm-example"},Q={key:0,class:"error"},X={key:1,class:"loading"},Y=["disabled"];function Z(e,t,a,o,n,i){return s(),r("div",K,[n.error?(s(),r("div",Q,c(n.error),1)):p("",!0),n.loading?(s(),r("div",X," 正在加载 WASM 模块 ... ")):p("",!0),n.exampleStarted?p("",!0):(s(),r("button",{key:2,onClick:t[0]||(t[0]=x=>i.loadExample()),disabled:n.loading},"点击运行 "+c(i.exampleName),9,Y))])}const ee=m(q,[["render",Z]]);function te(e){return e.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}const ae={name:"WebGPUExample",props:{example:"",autoLoad:!0},data(){return{error:"",loading:!1,exampleStarted:!1}},computed:{exampleName(){return te(this.example)}},methods:{showAlert(){this.hideLoading();let e=document.getElementById("alert");e!=null&&(e.style.display="block")},hideLoading(){let e=document.getElementById("loading");e!=null&&(e.style.display="none")},detectWebGPUThenLoad(){"navigator"in window&&"gpu"in navigator?navigator.gpu.requestAdapter().then(e=>{this.loadExample()}).catch(e=>{this.showAlert()}):this.showAlert()},async loadExample(){this.loading=!0,this.exampleStarted=!0;try{(await h(()=>import(`./wasm/${this.example}.js`.replace("_","-")),[])).default().then(t=>{this.loading=!1,this.exampleStarted=!0},t=>{`${t}`.includes("don't mind me. This isn't actually an error!")?(this.exampleStarted=!0,this.loading=!1):this.showErr(t)})}catch(e){this.showErr(e)}},showErr(e){this.error=`An error occurred loading "${this.example}": ${e}`,console.error(e),this.exampleStarted=!1,this.loading=!1,this.showAlert()}},async mounted(){this.autoLoad&&this.detectWebGPUThenLoad()}},ne={id:"wasm-example"},oe=l("div",{id:"alert",style:{display:"none",color:"#353535","margin-top":"20px"}},[l("div",{style:{"line-height":"40px"}},"此浏览器版本不支持 WebGPU"),l("div",{style:{"font-size":"16px",color:"#999999"}},[w("请使用 Chrome/Microsoft Edge 113 及以上版本，或者 Chrome/Edge Canary, FireFox Nightly 并 "),l("span",null,[l("a",{href:"https://jinleili.github.io/learn-wgpu-zh/#如何开启浏览器-webgpu-试验功能",class:"a"},"开启 WebGPU 实验功能")])])],-1),se={key:0,class:"loading"},re=["disabled"];function ie(e,t,a,o,n,i){return s(),r("div",ne,[oe,n.loading?(s(),r("div",se," 正在加载 WASM 模块 ... ")):p("",!0),n.exampleStarted?p("",!0):(s(),r("button",{key:1,onClick:t[0]||(t[0]=x=>i.detectWebGPUThenLoad()),disabled:n.loading},"点击运行 "+c(i.exampleName),9,re))])}const le=m(ae,[["render",ie]]),de={...j,enhanceApp({app:e}){e.component("AutoGithubLink",I),e.component("JoinWeiChatGroup",J),e.component("WasmExample",ee),e.component("WebGPUExample",le)}};function g(e){if(e.extends){const t=g(e.extends);return{...t,...e,async enhanceApp(a){t.enhanceApp&&await t.enhanceApp(a),e.enhanceApp&&await e.enhanceApp(a)}}}return e}const d=g(de),pe=_({name:"VitePressApp",setup(){const{site:e}=f();return k(()=>{G(()=>{document.documentElement.lang=e.value.lang,document.documentElement.dir=e.value.dir})}),T(),U(),R(),d.setup&&d.setup(),()=>N(d.Layout)}});async function ce(){const e=me(),t=ue();t.provide(E,e);const a=b(e.route);return t.provide(A,a),t.component("Content",$),t.component("ClientOnly",C),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),d.enhanceApp&&await d.enhanceApp({app:t,router:e,siteData:P}),{app:t,router:e,data:a}}function ue(){return S(pe)}function me(){let e=u,t;return L(a=>{let o=W(a);return e&&(t=o),(e||t===o)&&(o=o.replace(/\.js$/,".lean.js")),u&&(e=!1),h(()=>import(o),[])},d.NotFound)}u&&ce().then(({app:e,router:t,data:a})=>{t.go().then(()=>{v(t.route,a.site),e.mount("#app")})});export{ce as createApp};
