# ä»‹ç»

_ä¸ºäº†ä¾¿äºè¯»è€…çš„ç†è§£ï¼Œè¯‘è€…é€‰æ‹©æ€§çš„æ·»åŠ äº†ä¸€äº›å†…å®¹ï¼Œå¹¶å¯¹åŸæ–‡ä¸­æœ‰æ­§ä¹‰æˆ–é”™è¯¯çš„åœ°æ–¹è¿›è¡Œé‡æ–°è¡¨è¿°ã€‚æ‰€æœ‰çš„æ·»åŠ ä¸ä¿®æ”¹å‡ä¸ä¼šåšå•ç‹¬æ ‡è®°ã€‚_

_ç¿»è¯‘æ—¶é‡‡ç”¨äº†ç¬¬ä¸€äººç§°è§†è§’ï¼Œæ•…ï¼Œé™¤äº†å¸¦ ğŸ†• æ ‡è®°çš„ç« èŠ‚ï¼Œæ•™ç¨‹ä¸­çš„**æˆ‘**ä¸»è¦æŒ‡çš„æ˜¯åŸä½œè€… [@sotrh](https://github.com/sotrh)ã€‚_

_å¦å¤–ï¼Œä¸“æœ‰åè¯åœ¨ä¸€ä¸ªæ®µè½ä¸­ç¬¬ä¸€æ¬¡å‡ºç°æ—¶åšäº†**åŠ ç²—**å¤„ç†ï¼ŒåŒä¸€æ®µè½é‡Œåå¤å‡ºç°æ—¶å°±ä¸å†åŠ ç²—ã€‚_

## ä»€ä¹ˆæ˜¯ WebGPU

**WebGPU** æ˜¯ç”± W3C [GPU for the Web](https://www.w3.org/community/gpu/) ç¤¾åŒºç»„æ‰€å‘å¸ƒçš„è§„èŒƒï¼Œç›®æ ‡æ˜¯å…è®¸ç½‘é¡µä»£ç ä»¥é«˜æ€§èƒ½ä¸”å®‰å…¨å¯é çš„æ–¹å¼è®¿é—® GPU åŠŸèƒ½ã€‚å®ƒé€šè¿‡å€Ÿé‰´ Vulkan APIï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå®¿ä¸»ç¡¬ä»¶ä¸Šä½¿ç”¨çš„å„å¼ APIï¼ˆå¦‚ DirectXã€Metalã€Vulkanï¼‰æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚

## wgpu ä¸ WebGPU çš„å…³ç³»

[wgpu](https://github.com/gfx-rs/wgpu) æ˜¯åŸºäº [WebGPU API è§„èŒƒ](https://gpuweb.github.io/gpuweb/)çš„ã€è·¨å¹³å°çš„ã€å®‰å…¨çš„ã€çº¯ Rust å›¾å½¢ APIã€‚å®ƒæ˜¯ Firefoxã€Servo å’Œ Deno ä¸­ WebGPU æ•´åˆçš„æ ¸å¿ƒã€‚

**wgpu** ä¸ä»…å¯ä»¥åœ¨ Web ç¯å¢ƒè¿è¡Œï¼Œè¿˜å¯ä»¥åœ¨ macOS / iOSã€Androidã€Window å’Œ Linux ç­‰ç³»ç»Ÿä¸ŠåŸç”Ÿè¿è¡Œã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© Rust

wgpu å®é™…ä¸Šæä¾›äº† C è¯­è¨€ç»‘å®š ([wgpu-native](https://github.com/gfx-rs/wgpu-native))ï¼Œä½ å¯ä»¥å†™ C/C++ æˆ–å…¶ä»–èƒ½ä¸ C äº’é€šçš„è¯­è¨€æ¥ä½¿ç”¨å®ƒã€‚å°½ç®¡å¦‚æ­¤ï¼Œwgpu æœ¬èº«æ˜¯ç”¨ Rust å®ç°çš„ï¼Œå®ƒä¾¿åˆ©çš„ Rust ç»‘å®šèƒ½å‡å°‘ä½ ä½¿ç”¨ä¸­çš„é˜»ç¢ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒRust æ˜¯ä¸€é—¨é«˜æ€§èƒ½ï¼Œå†…å­˜å’Œçº¿ç¨‹å®‰å…¨ä¸”æå…·ç”Ÿäº§åŠ›çš„ç°ä»£åº•å±‚è¯­è¨€ã€‚

åœ¨å­¦ä¹ æœ¬æ•™ç¨‹ä¹‹å‰ä½ éœ€è¦å…ˆç†Ÿæ‚‰ Rustï¼Œå› ä¸ºè¿™é‡Œä¸ä¼šè¯¦ç»†ä»‹ç» Rust çš„è¯­æ³•çŸ¥è¯†ã€‚å¦‚æœå¯¹ Rust è¿˜ä¸å¤ªç†Ÿæ‚‰ï¼Œå¯ä»¥å›é¡¾ä¸€ä¸‹ [Rust æ•™ç¨‹](https://www.rust-lang.org/zh-CN/learn)æˆ– [Rust è¯­è¨€åœ£ç»](https://course.rs/about-book.html)ã€‚å¦å¤–è¿˜éœ€è¦ç†Ÿæ‚‰ Rust åŒ…ç®¡ç†å·¥å…· [Cargo](https://rustwiki.org/zh-CN/cargo/getting-started/index.html)ã€‚

## ä¸ºä»€ä¹ˆè¦å­¦ä¹  wgpuï¼Œç›´æ¥ç”¨ JS/TS æ WebGPU å¼€å‘ä¸é¦™å—ï¼Ÿ

ä» wgpu åŠ dawn è¿™ä¸¤ä¸ªä¸»è¦çš„ WebGPU æ ‡å‡†çš„å®ç°åº“çš„å¼€å‘åŠ¨å‘å¯ä»¥çœ‹å‡ºï¼Œå¤§é‡çš„æ‰©å±•ç‰¹æ€§ç›®å‰åªæœ‰åœ¨ Native ç«¯ï¼ˆWindowsã€macOSã€Linuxã€iOSã€Androidï¼‰åŸç”Ÿè¿è¡Œæ‰èƒ½æ”¯æŒã€‚wgpu æ›´æ˜¯å°† Native ç«¯è¿è¡Œåšä¸ºé¦–è¦ç›®æ ‡ï¼ŒWebGPU æ˜¯åšä¸ºæœ€ä½æ”¯æŒçš„ç‰¹æ€§é›†è€Œå­˜åœ¨ã€‚

ä½¿ç”¨ wgpu åœ¨æ¡Œé¢åŠç§»åŠ¨ç«¯åšè·¨å¹³å°åŸç”Ÿåº”ç”¨å¼€å‘çš„ä½“éªŒæå¥½ï¼Œç”šè‡³æˆ‘åå‘äºè®¤ä¸ºï¼š**WebGPU æ›´å®¹æ˜“åœ¨ Native ç«¯å¾—åˆ°æ™®åŠ**ã€‚å› ä¸ºä¸ç”¨å—é™äº 1.0 æ ‡å‡†å•¥æ—¶å€™å‘å¸ƒï¼Œç”¨æˆ·çš„æµè§ˆå™¨æ˜¯å¦æ”¯æŒç­‰é—®é¢˜ï¼Œç°åœ¨å°±å¯ä»¥å‘å¸ƒé‡‡ç”¨äº† wgpu çš„å•†ä¸šåº”ç”¨ã€‚

å­¦ä¹  wgpu è¿˜æœ‰å¦ä¸€ä¸ªé‡è¦çš„ä¼˜åŠ¿ï¼Œé‚£å°±æ˜¯å¯ä»¥åˆ©ç”¨å„ç§å¼ºå¤§çš„æ¡Œé¢ç«¯ GPU è°ƒè¯•å·¥å…·ã€‚åœ¨å¼€å‘å¤§å‹ 2D/3D åº”ç”¨æ—¶ï¼Œé€šè¿‡ä½¿ç”¨å‘½ä»¤è®°å½•/å›æ”¾ã€å¸§æ•æ‰ã€Buffer è§†å›¾ç­‰åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿå®šä½ GPU å±‚ä»£ç /æ•°æ®çš„æ€§èƒ½ç“¶é¢ˆå’Œç¨‹åºç¼ºé™·ã€‚ç›¸è¾ƒäºä»…ä¾é æµè§ˆå™¨æä¾›çš„æœ‰é™è°ƒè¯•èƒ½åŠ›ï¼Œè¿™äº›å·¥å…·èƒ½å¤Ÿäº‹åŠåŠŸå€ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¿«åœ°è§£å†³é—®é¢˜ã€‚

## wgpu/WebGPU çš„å­¦ä¹ èµ„æ–™æ˜¯ä¸æ˜¯å¾ˆå°‘ï¼Ÿ

å…¶å®ä¸ç”¨çº ç»“äº WebGPU æ–¹é¢çš„ç›´æ¥å­¦ä¹ èµ„æ–™çš„å¤šå°‘ã€‚

WebGPU å°±æ˜¯ä¸€å¥—å›¾å½¢æ¥å£ï¼Œç»å¤§éƒ¨åˆ†æ¦‚å¿µéƒ½æ˜¯å„å›¾å½¢æ¥å£é‡Œé€šç”¨çš„ï¼Œä»»ä½•ä¸€æœ¬ç»å…¸å›¾å½¢å­¦ä¹¦ç±éƒ½æ˜¯æˆ‘ä»¬çš„å­¦ä¹ èµ„æ–™ã€‚
è¦åˆ©ç”¨å¥½è¿™äº›ç»å…¸èµ„æ–™ï¼Œå‰æä»…ä»…å°±æ˜¯è¦å…ˆå­¦ä¹ ä¸€å¥—å›¾å½¢æ¥å£ã€‚å› ä¸ºå›¾å½¢å­¦çš„ä¹¦ä¸æ˜¯ä½¿ç”¨ç»Ÿä¸€çš„ç‰¹å®šå›¾å½¢æ¥å£æ‰€å†™ï¼Œå…ˆå­¦ä¼šä¸€ä¸ªå›¾å½¢æ¥å£åŠå¸¸è§çš„æ¦‚å¿µï¼Œç„¶åå†å»æ·±å…¥å­¦ä¹ æŸä¸ªæ–¹é¢çš„èµ„æ–™å°±ä¼šäº‹åŠåŠŸå€ã€‚

## ç°åœ¨å­¦ä¹  wgpu æ˜¯ä¸æ˜¯ä¸ºæ—¶å°šæ—©ï¼Ÿ

WebGPU 1.0 API å·²ç»ç¨³å®šï¼Œ[Google å·²ç»åœ¨ 2023/4/6 å®£å¸ƒä» Chrome 113 ç‰ˆæœ¬å¼€å§‹æ­£å¼æ”¯æŒ WebGPU](https://developer.chrome.com/blog/webgpu-release/)ã€‚

> <img src="/res/WebGPU-1.0.png" alt="WebGPU Spec 1.0" />
> è¡¥å……ä¸€ä¸‹ @Kangz çš„è¯: Web è§„èŒƒæœ‰ç‚¹æ»‘ç¨½ï¼Œå› ä¸ºâ€œè‰æ¡ˆâ€æˆ–â€œæ¨èâ€ä¹‹ç±»çš„åç§°åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸€ä¸ªç®¡ç†ç»†èŠ‚ï¼Œå®é™…ä¸Š<b>å¯¹è§„èŒƒæ˜¯å¦ç¨³å®šå¯ç”¨</b>æ²¡æœ‰ä»»ä½•å½±å“ã€‚äº‹å®ä¸Šï¼ŒW3C ç¨‹åºå»ºè®®è‡³å°‘æœ‰ä¸¤ä¸ªæµè§ˆå™¨åœ¨è§„èŒƒé€šè¿‡â€œè‰æ¡ˆâ€ä¹‹å‰å·²ç»å‘å¸ƒäº†å…¼å®¹çš„å®ç°ï¼Œä½†æ˜¾ç„¶è¿™äº›æµè§ˆå™¨ä¼šè®¤ä¸ºè§„èŒƒç›¸å½“ç¨³å®š,ç„¶åæ‰æ„¿æ„å‘å¸ƒå®ç°ã€‚ç„¶è€Œï¼Œè¿™ç¡®å®ä»¤å¼€å‘äººå‘˜æ„Ÿåˆ°å›°æƒ‘ï¼Œæˆ‘ä»¬å¯¹æ­¤æ·±è¡¨æ­‰æ„ã€‚

## å¦‚ä½•è¿è¡Œç¤ºä¾‹ä»£ç 

æœ¬æ•™ç¨‹çš„ç¤ºä¾‹ä»£ç å¤§éƒ¨åˆ†æ”¾åœ¨ [`code/`](https://github.com/jinleili/learn-wgpu-zh/tree/master/code) ç›®å½•ä¸‹ï¼Œä¸”ç¤ºä¾‹ç¨‹åºçš„åç§°ä¸ç¨‹åºç›®å½•åŒåã€‚
æ¯”å¦‚ï¼Œç¬¬ä¸€ç«  **ä¾èµ–ä¸çª—å£** æ‰€æœ‰åœ¨çš„ç›®å½•æ˜¯ **code/beginner/`tutorial1-window`**, æ­¤ç¤ºä¾‹ç¨‹åºçš„åç§°ä¹Ÿå« `tutorial1-window`:

```sh
# åœ¨æ¡Œé¢ç¯å¢ƒæœ¬åœ°è¿è¡Œ
cargo run --bin tutorial3-pipeline

# åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ
# éœ€è¦å…ˆå®‰è£… Rust WebAssembly target
rustup target add wasm32-unknown-unknown
# ä½¿ç”¨ WebGPUï¼ˆéœ€è¦ä½¿ç”¨ Chrome/Edge 113+ æˆ– Chrome/Edge Canaryï¼ŒCanary éœ€æ‰‹åŠ¨å¼€å¯ WebGPU è¯•éªŒåŠŸèƒ½ï¼‰
# compute-pipeline, vertex-animation åŠ hilbert-curve ç¤ºä¾‹åªèƒ½åœ¨æ¡Œé¢ç«¯ä¸æµè§ˆå™¨ç«¯ WebGPU ç¯å¢ƒè¿è¡Œ
cargo run-wasm --bin vertex-animation
# ä½¿ç”¨ WebGL 2.0
cargo run-wasm --bin tutorial2-surface --features webgl
```

**è°ƒè¯•ä¸é›†æˆ** éƒ¨åˆ†çš„ä»£ç æ˜¯ 2 ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼š
[wgpu-in-app](https://github.com/jinleili/wgpu-in-app) å’Œ [bevy-in-app](https://github.com/jinleili/bevy-in-app)

[**simuverse**](https://github.com/jinleili/simuverse) æ˜¯åŸºäº wgpu + [egui](https://github.com/emilk/egui) çš„æ‰©å±•ç¤ºä¾‹ï¼Œæä¾›äº†ç²’å­çŸ¢é‡åœºï¼Œæµä½“åœºåŠ GPU ç¨‹åºåŒ–çº¹ç†çš„å®ç°ã€‚

## å¦‚ä½•å¼€å¯æµè§ˆå™¨ WebGPU åŠŸèƒ½æ”¯æŒ

### Chrome

Chrome 113+ã€Microsoft Edge 113+ å‡å·²ç»é»˜è®¤å¼€å¯äº† WebGPU æ”¯æŒã€‚

### FireFox

å®‰è£… Nightly ç‰ˆæœ¬ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ `about:config` , å°† `dom.webgpu.enabled` è®¾ç½®ä¸º `true`:
<img src="/res/firefox.png" alt="FireFox Nightly">

### Safari

å®‰è£… [Safari Technology Preview 185+](https://www.webkit.org/blog/14879/webgpu-now-available-for-testing-in-safari-technology-preview/)ï¼Œä»é¡¶éƒ¨èœå•æ é€‰æ‹© `å¼€å‘ -> åŠŸèƒ½æ ‡å¿—` , æœç´¢å¹¶å‹¾é€‰ `WebGPU`:
<img src="/res/safari.png" alt="Edge Canary">

## å…³äºè¯‘è€…

æˆ‘æ˜¯ä¸€åç§»åŠ¨ç«¯æ¶æ„å¸ˆï¼Œæœ‰å¤šå¹´ä½¿ç”¨ OpenGL / WebGL, Metal çš„å®è·µç»éªŒã€‚2018 å¹´å¼€å§‹æ¥è§¦ WebGPUï¼Œç›®å‰æ­£ç§¯æåœ°å‚ä¸åˆ° [wgpu å¼€æºé¡¹ç›®çš„å¼€å‘ä¸å®Œå–„](https://github.com/gfx-rs/wgpu/commits?author=jinleili)ä¹‹ä¸­ï¼Œå¹¶ä¸”å·²äºä¸¤å¹´å‰åœ¨ AppStore ä¸Šæ¶äº†åŸºäº wgpu å®ç°çš„æ¯›ç¬”ä¹¦æ³•æ¨¡æ‹Ÿ App [å­—ä¹  Pro](https://apps.apple.com/cn/app/å­—ä¹ -pro/id1507339788)ã€‚

## åŠ å…¥ wgpu å¾®ä¿¡å­¦ä¹ äº¤æµç¾¤

<JoinWeiChatGroup />
